import{p as e,g as t}from"./prism-DU08x7FD.js";import{t as r}from"./iterables-BnTatl6v.js";const s={g4:"antlr4",ino:"arduino","arm-asm":"armasm",art:"arturo",adoc:"asciidoc",avs:"avisynth",avdl:"avro-idl",gawk:"awk",sh:"bash",shell:"bash",shortcode:"bbcode",rbnf:"bnf",oscript:"bsl",cfc:"cfscript","cilk-c":"cilkc","cilk-cpp":"cilkcpp",cilk:"cilkcpp",coffee:"coffeescript",conc:"concurnas",cs:"csharp",dotnet:"csharp",razor:"cshtml",jinja2:"django","dns-zone":"dns-zone-file",dockerfile:"docker",gv:"dot",eta:"ejs",xlsx:"excel-formula",xls:"excel-formula",po:"gettext",gamemakerlanguage:"gml",gni:"gn","go-mod":"go-module",hbs:"handlebars",mustache:"handlebars",hs:"haskell",idr:"idris",gitignore:"ignore",hgignore:"ignore",npmignore:"ignore",js:"javascript",webmanifest:"json",kt:"kotlin",kts:"kotlin",kum:"kumir",tex:"latex",context:"latex",ly:"lilypond",ld:"linker-script",emacs:"lisp",elisp:"lisp","emacs-lisp":"lisp",md:"markdown",html:"markup",svg:"markup",mathml:"markup",moon:"moonscript",n4jsd:"n4js",nani:"naniscript",objc:"objectivec",qasm:"openqasm",objectpascal:"pascal",px:"pcaxis",pcode:"peoplecode",text:"plain",txt:"plain",plaintext:"plain",plantuml:"plant-uml",pq:"powerquery",mscript:"powerquery",pbfasm:"purebasic",purs:"purescript",py:"python",qs:"qsharp",rkt:"racket",rpy:"renpy",res:"rescript",robot:"robotframework",rb:"ruby","sh-session":"shell-session",shellsession:"shell-session",smlnj:"sml",sol:"solidity",sln:"solution-file",rq:"sparql",sclang:"supercollider",t4:"t4-cs","tree-view":"treeview",trickle:"tremor",troy:"tremor",trig:"turtle",ts:"typescript",tsconfig:"typoscript",uscript:"unrealscript",uc:"unrealscript",url:"uri",vb:"visual-basic",vba:"visual-basic",webidl:"web-idl",mathematica:"wolfram",nb:"wolfram",wl:"wolfram",xeoracube:"xeora",ssml:"xml",atom:"xml",rss:"xml",yml:"yaml"};function a(e){return s[e]||e}const i=new Set(["none"]);function o(e,t){const r=e.languageRegistry.resolveRef(t).id;return e.languageRegistry.has(r)||i.has(r)}class Autoloader{srcPath=(()=>{if("undefined"!=typeof document){const e=document.currentScript;if(e){const t=/\bplugins\/autoloader\/autoloader\.(?:min\.)?js(?:\?[^\r\n/]*)?$/i,r=/(^|\/)[\w-]+\.(?:min\.)?m?js(?:\?[^\r\n/]*)?$/i,s=e.getAttribute("data-autoloader-path");if(null!=s)return s.trim().replace(/\/?$/,"/");{const s=e.src;if(t.test(s))return s.replace(t,"/");if(r.test(s))return s.replace(r,"$1/")}}}return"./"})();_importCache=new Map;Prism;constructor(e){this.Prism=e}async loadLanguages(e){const t=r(e).map(a).filter((e=>!o(this.Prism,e)));await Promise.all(t.map((e=>{const t=(r=`languages/${e}.js`,this.srcPath.replace(/\/$/,"")+"/"+r);var r;let s=this._importCache.get(t);return void 0===s&&(s=import(t).then((e=>{const t=e.default;this.Prism.languageRegistry.add(t)})),this._importCache.set(t,s)),s})))}preloadLanguages(e){this.loadLanguages(e).catch((t=>{console.error(`Failed to preload languages (${r(e).join(", ")}): ${t+""}`)}))}}const l={id:"autoloader",plugin:e=>new Autoloader(e),effect(e){function r(e){return!e||i.has(e)?[]:/^diff-./i.test(e)?["diff",e.slice(5)]:[e]}return e.hooks.add("complete",(({element:s,language:a})=>{if(!a||i.has(a))return;let n=r(a);for(const e of(e=>{let r=e.getAttribute("data-dependencies")?.trim();if(!r){const s=t(e);s&&(r=s.getAttribute("data-dependencies")?.trim())}return r?r.split(/\s*,\s*/):[]})(s))n.push(...r(e));if(n=n.filter((t=>!o(e,t))),0===n.length)return;const c=e.pluginRegistry.peek(l)?.plugin;c.loadLanguages(n).then((()=>e.highlightElement(s)),(e=>{console.error(`Failed to load languages (${n.join(", ")}): ${e+""}`)}))}))}};e.pluginRegistry.add(l);export{Autoloader as A,l as S,a as r};
