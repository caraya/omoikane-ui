{"version":3,"file":"typescript.js","sources":["../../src/languages/typescript.js"],"sourcesContent":["import { toArray } from '../util/iterables.js';\nimport { insertBefore } from '../util/language-util.js';\nimport javascript from './javascript.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'typescript'>} */\nexport default {\n\tid: 'typescript',\n\trequire: javascript,\n\talias: 'ts',\n\tgrammar ({ extend }) {\n\t\tconst typeInside = /** @type {import('../types.d.ts').Grammar} */ ({});\n\n\t\tconst typescript = extend('javascript', {\n\t\t\t'class-name': {\n\t\t\t\tpattern:\n\t\t\t\t\t/(\\b(?:class|extends|implements|instanceof|interface|new|type)\\s+)(?!keyof\\b)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?:\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: typeInside,\n\t\t\t},\n\t\t\t'builtin':\n\t\t\t\t/\\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\\b/,\n\t\t});\n\n\t\ttypescript.keyword = [\n\t\t\t...toArray(/** @type {import('../types.d.ts').GrammarTokens} */ (typescript).keyword),\n\n\t\t\t// The keywords TypeScript adds to JavaScript\n\t\t\t/\\b(?:abstract|declare|is|keyof|out|readonly|require|satisfies)\\b/,\n\t\t\t// keywords that have to be followed by an identifier\n\t\t\t/\\b(?:asserts|infer|interface|module|namespace|type)\\b(?=\\s*(?:[{_$a-zA-Z\\xA0-\\uFFFF]|$))/,\n\t\t\t// This is for `import type *, {}`\n\t\t\t/\\btype\\b(?=\\s*(?:[\\{*]|$))/,\n\t\t];\n\n\t\t// doesn't work with TS because TS is too complex\n\t\tdelete typescript['parameter'];\n\t\tdelete typescript['literal-property'];\n\n\t\t// a version of typescript specifically for highlighting types\n\t\tObject.assign(typeInside, typescript);\n\t\tdelete typeInside['class-name'];\n\n\t\tinsertBefore(typescript, 'function', {\n\t\t\t'decorator': {\n\t\t\t\tpattern: /@[$\\w\\xA0-\\uFFFF]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'at': {\n\t\t\t\t\t\tpattern: /^@/,\n\t\t\t\t\t\talias: 'operator',\n\t\t\t\t\t},\n\t\t\t\t\t'function': /^[\\s\\S]+/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'generic-function': {\n\t\t\t\t// e.g. foo<T extends \"bar\" | \"baz\">( ...\n\t\t\t\tpattern:\n\t\t\t\t\t/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\\s*\\()/,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'function': /^#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*/,\n\t\t\t\t\t'generic': {\n\t\t\t\t\t\tpattern: /<[\\s\\S]+/, // everything after the first <\n\t\t\t\t\t\talias: 'class-name',\n\t\t\t\t\t\tinside: typeInside,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn typescript;\n\t},\n};\n"],"names":["typescript","id","require","javascript","alias","grammar","extend","typeInside","pattern","lookbehind","greedy","inside","builtin","keyword","toArray","Object","assign","insertBefore","decorator","at","function","generic"],"mappings":"yKAKA,IAAeA,EAAA,CACdC,GAAI,aACJC,QAASC,EACTC,MAAO,KACP,OAAAC,EAASC,OAAEA,IACV,MAAMC,EAA6D,CAAE,EAE/DP,EAAaM,EAAO,aAAc,CACvC,aAAc,CACbE,QACC,+KACDC,YAAY,EACZC,QAAQ,EACRC,OAAQJ,GAETK,QACC,0FAiDF,OA9CAZ,EAAWa,QAAU,IACjBC,EAA6D,EAAaD,SAG7E,mEAEA,2FAEA,qCAIMb,EAAsB,iBACtBA,EAAW,oBAGlBe,OAAOC,OAAOT,EAAYP,UACnBO,EAAW,cAElBU,EAAajB,EAAY,WAAY,CACpCkB,UAAa,CACZV,QAAS,qBACTG,OAAQ,CACPQ,GAAM,CACLX,QAAS,KACTJ,MAAO,YAERgB,SAAY,aAGd,mBAAoB,CAEnBZ,QACC,yGACDE,QAAQ,EACRC,OAAQ,CACPS,SAAY,4DACZC,QAAW,CACVb,QAAS,WACTJ,MAAO,aACPO,OAAQJ,OAMLP,CACP"}