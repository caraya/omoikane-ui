{"version":3,"file":"mongodb.js","sources":["../../src/languages/mongodb.js"],"sourcesContent":["import javascript from './javascript.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'mongodb'>} */\nexport default {\n\tid: 'mongodb',\n\tbase: javascript,\n\tgrammar () {\n\t\tlet operators = [\n\t\t\t// query and projection\n\t\t\t'$eq',\n\t\t\t'$gt',\n\t\t\t'$gte',\n\t\t\t'$in',\n\t\t\t'$lt',\n\t\t\t'$lte',\n\t\t\t'$ne',\n\t\t\t'$nin',\n\t\t\t'$and',\n\t\t\t'$not',\n\t\t\t'$nor',\n\t\t\t'$or',\n\t\t\t'$exists',\n\t\t\t'$type',\n\t\t\t'$expr',\n\t\t\t'$jsonSchema',\n\t\t\t'$mod',\n\t\t\t'$regex',\n\t\t\t'$text',\n\t\t\t'$where',\n\t\t\t'$geoIntersects',\n\t\t\t'$geoWithin',\n\t\t\t'$near',\n\t\t\t'$nearSphere',\n\t\t\t'$all',\n\t\t\t'$elemMatch',\n\t\t\t'$size',\n\t\t\t'$bitsAllClear',\n\t\t\t'$bitsAllSet',\n\t\t\t'$bitsAnyClear',\n\t\t\t'$bitsAnySet',\n\t\t\t'$comment',\n\t\t\t'$elemMatch',\n\t\t\t'$meta',\n\t\t\t'$slice',\n\n\t\t\t// update\n\t\t\t'$currentDate',\n\t\t\t'$inc',\n\t\t\t'$min',\n\t\t\t'$max',\n\t\t\t'$mul',\n\t\t\t'$rename',\n\t\t\t'$set',\n\t\t\t'$setOnInsert',\n\t\t\t'$unset',\n\t\t\t'$addToSet',\n\t\t\t'$pop',\n\t\t\t'$pull',\n\t\t\t'$push',\n\t\t\t'$pullAll',\n\t\t\t'$each',\n\t\t\t'$position',\n\t\t\t'$slice',\n\t\t\t'$sort',\n\t\t\t'$bit',\n\n\t\t\t// aggregation pipeline stages\n\t\t\t'$addFields',\n\t\t\t'$bucket',\n\t\t\t'$bucketAuto',\n\t\t\t'$collStats',\n\t\t\t'$count',\n\t\t\t'$currentOp',\n\t\t\t'$facet',\n\t\t\t'$geoNear',\n\t\t\t'$graphLookup',\n\t\t\t'$group',\n\t\t\t'$indexStats',\n\t\t\t'$limit',\n\t\t\t'$listLocalSessions',\n\t\t\t'$listSessions',\n\t\t\t'$lookup',\n\t\t\t'$match',\n\t\t\t'$merge',\n\t\t\t'$out',\n\t\t\t'$planCacheStats',\n\t\t\t'$project',\n\t\t\t'$redact',\n\t\t\t'$replaceRoot',\n\t\t\t'$replaceWith',\n\t\t\t'$sample',\n\t\t\t'$set',\n\t\t\t'$skip',\n\t\t\t'$sort',\n\t\t\t'$sortByCount',\n\t\t\t'$unionWith',\n\t\t\t'$unset',\n\t\t\t'$unwind',\n\t\t\t'$setWindowFields',\n\n\t\t\t// aggregation pipeline operators\n\t\t\t'$abs',\n\t\t\t'$accumulator',\n\t\t\t'$acos',\n\t\t\t'$acosh',\n\t\t\t'$add',\n\t\t\t'$addToSet',\n\t\t\t'$allElementsTrue',\n\t\t\t'$and',\n\t\t\t'$anyElementTrue',\n\t\t\t'$arrayElemAt',\n\t\t\t'$arrayToObject',\n\t\t\t'$asin',\n\t\t\t'$asinh',\n\t\t\t'$atan',\n\t\t\t'$atan2',\n\t\t\t'$atanh',\n\t\t\t'$avg',\n\t\t\t'$binarySize',\n\t\t\t'$bsonSize',\n\t\t\t'$ceil',\n\t\t\t'$cmp',\n\t\t\t'$concat',\n\t\t\t'$concatArrays',\n\t\t\t'$cond',\n\t\t\t'$convert',\n\t\t\t'$cos',\n\t\t\t'$dateFromParts',\n\t\t\t'$dateToParts',\n\t\t\t'$dateFromString',\n\t\t\t'$dateToString',\n\t\t\t'$dayOfMonth',\n\t\t\t'$dayOfWeek',\n\t\t\t'$dayOfYear',\n\t\t\t'$degreesToRadians',\n\t\t\t'$divide',\n\t\t\t'$eq',\n\t\t\t'$exp',\n\t\t\t'$filter',\n\t\t\t'$first',\n\t\t\t'$floor',\n\t\t\t'$function',\n\t\t\t'$gt',\n\t\t\t'$gte',\n\t\t\t'$hour',\n\t\t\t'$ifNull',\n\t\t\t'$in',\n\t\t\t'$indexOfArray',\n\t\t\t'$indexOfBytes',\n\t\t\t'$indexOfCP',\n\t\t\t'$isArray',\n\t\t\t'$isNumber',\n\t\t\t'$isoDayOfWeek',\n\t\t\t'$isoWeek',\n\t\t\t'$isoWeekYear',\n\t\t\t'$last',\n\t\t\t'$last',\n\t\t\t'$let',\n\t\t\t'$literal',\n\t\t\t'$ln',\n\t\t\t'$log',\n\t\t\t'$log10',\n\t\t\t'$lt',\n\t\t\t'$lte',\n\t\t\t'$ltrim',\n\t\t\t'$map',\n\t\t\t'$max',\n\t\t\t'$mergeObjects',\n\t\t\t'$meta',\n\t\t\t'$min',\n\t\t\t'$millisecond',\n\t\t\t'$minute',\n\t\t\t'$mod',\n\t\t\t'$month',\n\t\t\t'$multiply',\n\t\t\t'$ne',\n\t\t\t'$not',\n\t\t\t'$objectToArray',\n\t\t\t'$or',\n\t\t\t'$pow',\n\t\t\t'$push',\n\t\t\t'$radiansToDegrees',\n\t\t\t'$range',\n\t\t\t'$reduce',\n\t\t\t'$regexFind',\n\t\t\t'$regexFindAll',\n\t\t\t'$regexMatch',\n\t\t\t'$replaceOne',\n\t\t\t'$replaceAll',\n\t\t\t'$reverseArray',\n\t\t\t'$round',\n\t\t\t'$rtrim',\n\t\t\t'$second',\n\t\t\t'$setDifference',\n\t\t\t'$setEquals',\n\t\t\t'$setIntersection',\n\t\t\t'$setIsSubset',\n\t\t\t'$setUnion',\n\t\t\t'$size',\n\t\t\t'$sin',\n\t\t\t'$slice',\n\t\t\t'$split',\n\t\t\t'$sqrt',\n\t\t\t'$stdDevPop',\n\t\t\t'$stdDevSamp',\n\t\t\t'$strcasecmp',\n\t\t\t'$strLenBytes',\n\t\t\t'$strLenCP',\n\t\t\t'$substr',\n\t\t\t'$substrBytes',\n\t\t\t'$substrCP',\n\t\t\t'$subtract',\n\t\t\t'$sum',\n\t\t\t'$switch',\n\t\t\t'$tan',\n\t\t\t'$toBool',\n\t\t\t'$toDate',\n\t\t\t'$toDecimal',\n\t\t\t'$toDouble',\n\t\t\t'$toInt',\n\t\t\t'$toLong',\n\t\t\t'$toObjectId',\n\t\t\t'$toString',\n\t\t\t'$toLower',\n\t\t\t'$toUpper',\n\t\t\t'$trim',\n\t\t\t'$trunc',\n\t\t\t'$type',\n\t\t\t'$week',\n\t\t\t'$year',\n\t\t\t'$zip',\n\t\t\t'$count',\n\t\t\t'$dateAdd',\n\t\t\t'$dateDiff',\n\t\t\t'$dateSubtract',\n\t\t\t'$dateTrunc',\n\t\t\t'$getField',\n\t\t\t'$rand',\n\t\t\t'$sampleRate',\n\t\t\t'$setField',\n\t\t\t'$unsetField',\n\n\t\t\t// aggregation pipeline query modifiers\n\t\t\t'$comment',\n\t\t\t'$explain',\n\t\t\t'$hint',\n\t\t\t'$max',\n\t\t\t'$maxTimeMS',\n\t\t\t'$min',\n\t\t\t'$orderby',\n\t\t\t'$query',\n\t\t\t'$returnKey',\n\t\t\t'$showDiskLoc',\n\t\t\t'$natural',\n\t\t];\n\n\t\tconst builtinFunctions = [\n\t\t\t'ObjectId',\n\t\t\t'Code',\n\t\t\t'BinData',\n\t\t\t'DBRef',\n\t\t\t'Timestamp',\n\t\t\t'NumberLong',\n\t\t\t'NumberDecimal',\n\t\t\t'MaxKey',\n\t\t\t'MinKey',\n\t\t\t'RegExp',\n\t\t\t'ISODate',\n\t\t\t'UUID',\n\t\t];\n\n\t\toperators = operators.map(operator => {\n\t\t\treturn operator.replace('$', '\\\\$');\n\t\t});\n\n\t\tconst operatorsSource = '(?:' + operators.join('|') + ')\\\\b';\n\n\t\treturn {\n\t\t\t$insert: {\n\t\t\t\t'property': {\n\t\t\t\t\t$before: 'string',\n\t\t\t\t\tpattern:\n\t\t\t\t\t\t/(?:([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\\\r\\n])*\\1|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)(?=\\s*:)/,\n\t\t\t\t\tgreedy: true,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'keyword': RegExp('^([\\'\"])?' + operatorsSource + '(?:\\\\1)?$'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'builtin': {\n\t\t\t\t\t$before: 'constant',\n\t\t\t\t\tpattern: RegExp('\\\\b(?:' + builtinFunctions.join('|') + ')\\\\b'),\n\t\t\t\t\talias: 'keyword',\n\t\t\t\t},\n\t\t\t},\n\t\t\t$merge: {\n\t\t\t\t'string': {\n\t\t\t\t\tinside: {\n\t\t\t\t\t\turl: {\n\t\t\t\t\t\t\t// url pattern\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/https?:\\/\\/[-\\w@:%.+~#=]{1,256}\\.[a-z0-9()]{1,6}\\b[-\\w()@:%+.~#?&/=]*/i,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentity: {\n\t\t\t\t\t\t\t// ipv4\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/\\b(?:(?:[01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d\\d?|2[0-4]\\d|25[0-5])\\b/,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n"],"names":["mongodb","id","base","javascript","grammar","operators","map","operator","replace","operatorsSource","join","$insert","property","$before","pattern","greedy","inside","keyword","RegExp","builtin","alias","$merge","string","url","entity"],"mappings":"mHAGA,IAAeA,EAAA,CACdC,GAAI,UACJC,KAAMC,EACN,OAAAC,GACC,IAAIC,EAAY,CAEf,MACA,MACA,OACA,MACA,MACA,OACA,MACA,OACA,OACA,OACA,OACA,MACA,UACA,QACA,QACA,cACA,OACA,SACA,QACA,SACA,iBACA,aACA,QACA,cACA,OACA,aACA,QACA,gBACA,cACA,gBACA,cACA,WACA,aACA,QACA,SAGA,eACA,OACA,OACA,OACA,OACA,UACA,OACA,eACA,SACA,YACA,OACA,QACA,QACA,WACA,QACA,YACA,SACA,QACA,OAGA,aACA,UACA,cACA,aACA,SACA,aACA,SACA,WACA,eACA,SACA,cACA,SACA,qBACA,gBACA,UACA,SACA,SACA,OACA,kBACA,WACA,UACA,eACA,eACA,UACA,OACA,QACA,QACA,eACA,aACA,SACA,UACA,mBAGA,OACA,eACA,QACA,SACA,OACA,YACA,mBACA,OACA,kBACA,eACA,iBACA,QACA,SACA,QACA,SACA,SACA,OACA,cACA,YACA,QACA,OACA,UACA,gBACA,QACA,WACA,OACA,iBACA,eACA,kBACA,gBACA,cACA,aACA,aACA,oBACA,UACA,MACA,OACA,UACA,SACA,SACA,YACA,MACA,OACA,QACA,UACA,MACA,gBACA,gBACA,aACA,WACA,YACA,gBACA,WACA,eACA,QACA,QACA,OACA,WACA,MACA,OACA,SACA,MACA,OACA,SACA,OACA,OACA,gBACA,QACA,OACA,eACA,UACA,OACA,SACA,YACA,MACA,OACA,iBACA,MACA,OACA,QACA,oBACA,SACA,UACA,aACA,gBACA,cACA,cACA,cACA,gBACA,SACA,SACA,UACA,iBACA,aACA,mBACA,eACA,YACA,QACA,OACA,SACA,SACA,QACA,aACA,cACA,cACA,eACA,YACA,UACA,eACA,YACA,YACA,OACA,UACA,OACA,UACA,UACA,aACA,YACA,SACA,UACA,cACA,YACA,WACA,WACA,QACA,SACA,QACA,QACA,QACA,OACA,SACA,WACA,YACA,gBACA,aACA,YACA,QACA,cACA,YACA,cAGA,WACA,WACA,QACA,OACA,aACA,OACA,WACA,SACA,aACA,eACA,YAkBDA,EAAYA,EAAUC,KAAIC,GAClBA,EAASC,QAAQ,IAAK,SAG9B,MAAMC,EAAkB,MAAQJ,EAAUK,KAAK,KAAO,OAEtD,MAAO,CACNC,QAAS,CACRC,SAAY,CACXC,QAAS,SACTC,QACC,oHACDC,QAAQ,EACRC,OAAQ,CACPC,QAAWC,OAAO,YAAcT,EAAkB,eAGpDU,QAAW,CACVN,QAAS,WACTC,QAASI,OAAO,8GAChBE,MAAO,YAGTC,OAAQ,CACPC,OAAU,CACTN,OAAQ,CACPO,IAAK,CAEJT,QACC,yEACDC,QAAQ,GAETS,OAAQ,CAEPV,QACC,8EACDC,QAAQ,MAMb"}