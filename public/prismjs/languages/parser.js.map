{"version":3,"file":"parser.js","sources":["../../src/languages/parser.js"],"sourcesContent":["import markup from './markup.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'parser'>} */\nexport default {\n\tid: 'parser',\n\tbase: markup,\n\tgrammar () {\n\t\tconst punctuation = /[\\[\\](){};]/;\n\n\t\tconst parser = {\n\t\t\t'expression': {\n\t\t\t\t// Allow for 3 levels of depth\n\t\t\t\tpattern: /(^|[^^])\\((?:[^()]|\\((?:[^()]|\\((?:[^()])*\\))*\\))*\\)/,\n\t\t\t\tgreedy: true,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {}, // See below\n\t\t\t},\n\t\t\t'keyword': {\n\t\t\t\tpattern:\n\t\t\t\t\t/(^|[^^])(?:\\^(?:case|eval|for|if|switch|throw)\\b|@(?:BASE|CLASS|GET(?:_DEFAULT)?|OPTIONS|SET_DEFAULT|USE)\\b)/,\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'variable': {\n\t\t\t\tpattern: /(^|[^^])\\B\\$(?:\\w+|(?=[.{]))(?:(?:\\.|::?)\\w+)*(?:\\.|::?)?/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /\\.|:+/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'function': {\n\t\t\t\tpattern: /(^|[^^])\\B[@^]\\w+(?:(?:\\.|::?)\\w+)*(?:\\.|::?)?/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'keyword': {\n\t\t\t\t\t\tpattern: /(^@)(?:GET_|SET_)/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /\\.|:+/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'escape': {\n\t\t\t\tpattern: /\\^(?:[$^;@()\\[\\]{}\"':]|#[a-f\\d]*)/i,\n\t\t\t\talias: 'builtin',\n\t\t\t},\n\t\t\t'punctuation': punctuation,\n\t\t};\n\n\t\tparser['expression'].inside = {\n\t\t\t'string': {\n\t\t\t\tpattern: /(^|[^^])([\"'])(?:(?!\\2)[^^]|\\^[\\s\\S])*\\2/,\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'keyword': parser.keyword,\n\t\t\t'variable': parser.variable,\n\t\t\t'function': parser.function,\n\t\t\t'boolean': /\\b(?:false|true)\\b/,\n\t\t\t'number': /\\b(?:0x[a-f\\d]+|\\d+(?:\\.\\d*)?(?:e[+-]?\\d+)?)\\b/i,\n\t\t\t'escape': parser.escape,\n\t\t\t'operator':\n\t\t\t\t/[~+*\\/\\\\%]|!(?:\\|\\|?|=)?|&&?|\\|\\|?|==|<[<=]?|>[>=]?|-[fd]?|\\b(?:def|eq|ge|gt|in|is|le|lt|ne)\\b/,\n\t\t\t'punctuation': punctuation,\n\t\t};\n\n\t\treturn {\n\t\t\t...parser,\n\t\t\t$insertBefore: {\n\t\t\t\t'keyword': {\n\t\t\t\t\t'parser-comment': {\n\t\t\t\t\t\tpattern: /(\\s)#.*/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'comment',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'tag/attr-value/punctuation': {\n\t\t\t\t\t'expression': parser.expression,\n\t\t\t\t\t'keyword': parser.keyword,\n\t\t\t\t\t'variable': parser.variable,\n\t\t\t\t\t'function': parser.function,\n\t\t\t\t\t'escape': parser.escape,\n\t\t\t\t\t'parser-punctuation': {\n\t\t\t\t\t\tpattern: punctuation,\n\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n"],"names":["parser","id","base","markup","grammar","punctuation","expression","pattern","greedy","lookbehind","inside","keyword","variable","function","escape","alias","string","boolean","number","operator","$insertBefore"],"mappings":"4EAGA,IAAeA,EAAA,CACdC,GAAI,SACJC,KAAMC,EACN,OAAAC,GACC,MAAMC,EAAc,cAEdL,EAAS,CACdM,WAAc,CAEbC,QAAS,uDACTC,QAAQ,EACRC,YAAY,EACZC,OAAQ,CAAE,GAEXC,QAAW,CACVJ,QACC,+GACDE,YAAY,GAEbG,SAAY,CACXL,QAAS,4DACTE,YAAY,EACZC,OAAQ,CACPL,YAAe,UAGjBQ,SAAY,CACXN,QAAS,iDACTE,YAAY,EACZC,OAAQ,CACPC,QAAW,CACVJ,QAAS,oBACTE,YAAY,GAEbJ,YAAe,UAGjBS,OAAU,CACTP,QAAS,qCACTQ,MAAO,WAERV,YAAeA,GAmBhB,OAhBAL,EAAmB,WAAEU,OAAS,CAC7BM,OAAU,CACTT,QAAS,2CACTE,YAAY,GAEbE,QAAWX,EAAOW,QAClBC,SAAYZ,EAAOY,SACnBC,SAAYb,EAAOa,SACnBI,QAAW,qBACXC,OAAU,kDACVJ,OAAUd,EAAOc,OACjBK,SACC,iGACDd,YAAeA,GAGT,IACHL,EACHoB,cAAe,CACdT,QAAW,CACV,iBAAkB,CACjBJ,QAAS,UACTE,YAAY,EACZM,MAAO,YAGT,6BAA8B,CAC7BT,WAAcN,EAAOM,WACrBK,QAAWX,EAAOW,QAClBC,SAAYZ,EAAOY,SACnBC,SAAYb,EAAOa,SACnBC,OAAUd,EAAOc,OACjB,qBAAsB,CACrBP,QAASF,EACTU,MAAO,iBAKX"}