{"version":3,"file":"lilypond.js","sources":["../../src/languages/lilypond.js"],"sourcesContent":["import scheme from './scheme.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'lilypond'>} */\nexport default {\n\tid: 'lilypond',\n\trequire: scheme,\n\talias: 'ly',\n\tgrammar () {\n\t\tlet schemeExpression =\n\t\t\t/\\((?:[^();\"#\\\\]|\\\\[\\s\\S]|;.*(?!.)|\"(?:[^\"\\\\]|\\\\.)*\"|#(?:\\{(?:(?!#\\})[\\s\\S])*#\\}|[^{])|<expr>)*\\)/\n\t\t\t\t.source;\n\t\t// allow for up to pow(2, recursivenessLog2) many levels of recursive brace expressions\n\t\t// For some reason, this can't be 4\n\t\tconst recursivenessLog2 = 5;\n\t\tfor (let i = 0; i < recursivenessLog2; i++) {\n\t\t\tschemeExpression = schemeExpression.replace(/<expr>/g, () => schemeExpression);\n\t\t}\n\t\tschemeExpression = schemeExpression.replace(/<expr>/g, /[^\\s\\S]/.source);\n\n\t\treturn {\n\t\t\t'comment': /%(?:(?!\\{).*|\\{[\\s\\S]*?%\\})/,\n\t\t\t'embedded-scheme': {\n\t\t\t\tpattern: RegExp(\n\t\t\t\t\t/(^|[=\\s])#(?:\"(?:[^\"\\\\]|\\\\.)*\"|[^\\s()\"]*(?:[^\\s()]|<expr>))/.source.replace(\n\t\t\t\t\t\t/<expr>/g,\n\t\t\t\t\t\t() => schemeExpression\n\t\t\t\t\t),\n\t\t\t\t\t'm'\n\t\t\t\t),\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'scheme': {\n\t\t\t\t\t\tpattern: /^(#)[\\s\\S]+$/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'language-scheme',\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'embedded-lilypond': {\n\t\t\t\t\t\t\t\tpattern: /#\\{[\\s\\S]*?#\\}/,\n\t\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t'punctuation': /^#\\{|#\\}$/,\n\t\t\t\t\t\t\t\t\t'lilypond': {\n\t\t\t\t\t\t\t\t\t\tpattern: /[\\s\\S]+/,\n\t\t\t\t\t\t\t\t\t\talias: 'language-lilypond',\n\t\t\t\t\t\t\t\t\t\tinside: 'lilypond',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t$rest: 'scheme',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /#/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'string': {\n\t\t\t\tpattern: /\"(?:[^\"\\\\]|\\\\.)*\"/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'class-name': {\n\t\t\t\tpattern: /(\\\\new\\s+)[\\w-]+/,\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'keyword': {\n\t\t\t\tpattern: /\\\\[a-z][-\\w]*/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^\\\\/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'operator': /[=|]|<<|>>/,\n\t\t\t'punctuation': {\n\t\t\t\tpattern:\n\t\t\t\t\t/(^|[a-z\\d])(?:'+|,+|[_^]?-[_^]?(?:[-+^!>._]|(?=\\d))|[_^]\\.?|[.!])|[{}()[\\]<>^~]|\\\\[()[\\]<>\\\\!]|--|__/,\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'number': /\\b\\d+(?:\\/\\d+)?\\b/,\n\t\t};\n\t},\n};\n"],"names":["lilypond","id","require","scheme","alias","grammar","schemeExpression","i","replace","comment","pattern","RegExp","lookbehind","greedy","inside","punctuation","$rest","string","keyword","operator","number"],"mappings":"2BAGA,IAAeA,EAAA,CACdC,GAAI,WACJC,QAASC,EACTC,MAAO,KACP,OAAAC,GACC,IAAIC,EACH,0GAKD,IAAK,IAAIC,EAAI,EAAGA,EADU,EACaA,IACtCD,EAAmBA,EAAiBE,QAAQ,WAAW,IAAMF,IAI9D,OAFAA,EAAmBA,EAAiBE,QAAQ,UAAW,aAEhD,CACNC,QAAW,8BACX,kBAAmB,CAClBC,QAASC,OACR,qEAAqEH,QACpE,WACA,IAAMF,IAEP,KAEDM,YAAY,EACZC,QAAQ,EACRC,OAAQ,CACPX,OAAU,CACTO,QAAS,eACTE,YAAY,EACZR,MAAO,kBACPU,OAAQ,CACP,oBAAqB,CACpBJ,QAAS,iBACTG,QAAQ,EACRC,OAAQ,CACPC,YAAe,YACff,SAAY,CACXU,QAAS,UACTN,MAAO,oBACPU,OAAQ,cAIXE,MAAO,WAGTD,YAAe,MAGjBE,OAAU,CACTP,QAAS,oBACTG,QAAQ,GAET,aAAc,CACbH,QAAS,mBACTE,YAAY,GAEbM,QAAW,CACVR,QAAS,iBACTI,OAAQ,CACPC,YAAe,QAGjBI,SAAY,aACZJ,YAAe,CACdL,QACC,uGACDE,YAAY,GAEbQ,OAAU,oBAEX"}