{"version":3,"file":"javascript.js","sources":["../../src/languages/javascript.js"],"sourcesContent":["import { JS_TEMPLATE, JS_TEMPLATE_INTERPOLATION } from '../shared/languages/patterns.js';\nimport { toArray } from '../util/iterables.js';\nimport clike from './clike.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'javascript'>} */\nexport default {\n\tid: 'javascript',\n\tbase: clike,\n\toptional: 'js-templates',\n\talias: 'js',\n\tgrammar ({ getOptionalLanguage }) {\n\t\tconst jsTemplates = /** @type {GrammarTokens} */ (getOptionalLanguage('js-templates'))?.[\n\t\t\t'template-string'\n\t\t];\n\n\t\treturn {\n\t\t\t'class-name': [\n\t\t\t\t{\n\t\t\t\t\tpattern: /(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'punctuation': /[.\\\\]/,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern:\n\t\t\t\t\t\t/(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$A-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\.(?:constructor|prototype))/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\t'keyword': [\n\t\t\t\t{\n\t\t\t\t\tpattern:\n\t\t\t\t\t\t/(^|[^.]|\\.\\.\\.\\s*)\\b(?:as|assert(?=\\s*\\{)|export|from(?=\\s*(?:['\"]|$))|import)\\b/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'module',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern: /((?:^|\\})\\s*)catch\\b/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'control-flow',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern:\n\t\t\t\t\t\t/(^|[^.]|\\.\\.\\.\\s*)\\b(?:await|break|case|continue|default|do|else|finally(?=\\s*(?:\\{|$))|for|if|return|switch|throw|try|while|yield)\\b/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'control-flow',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern:\n\t\t\t\t\t\t/(^|[^.]|\\.\\.\\.\\s*)\\b(?:async(?=\\s*(?:function\\b|\\(|[$\\w\\xA0-\\uFFFF]|$))|class|const|debugger|delete|enum|extends|function|(?:get|set)(?=\\s*(?:[#\\[$\\w\\xA0-\\uFFFF]|$))|implements|in|instanceof|interface|let|new|null|of|package|private|protected|public|static|super|this|typeof|undefined|var|void|with)\\b/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\t// Allow for all non-ASCII characters (See http://stackoverflow.com/a/2008444)\n\t\t\t'function':\n\t\t\t\t/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*(?:\\.\\s*(?:apply|bind|call)\\s*)?\\()/,\n\t\t\t'number': {\n\t\t\t\tpattern: RegExp(\n\t\t\t\t\t/(^|[^\\w$])/.source +\n\t\t\t\t\t\t'(?:' +\n\t\t\t\t\t\t// constant\n\t\t\t\t\t\t(/NaN|Infinity/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// binary integer\n\t\t\t\t\t\t\t/0[bB][01]+(?:_[01]+)*n?/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// octal integer\n\t\t\t\t\t\t\t/0[oO][0-7]+(?:_[0-7]+)*n?/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// hexadecimal integer\n\t\t\t\t\t\t\t/0[xX][\\dA-Fa-f]+(?:_[\\dA-Fa-f]+)*n?/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// decimal bigint\n\t\t\t\t\t\t\t/\\d+(?:_\\d+)*n/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// decimal number (integer or float) but no bigint\n\t\t\t\t\t\t\t/(?:\\d+(?:_\\d+)*(?:\\.(?:\\d+(?:_\\d+)*)?)?|\\.\\d+(?:_\\d+)*)(?:[Ee][+-]?\\d+(?:_\\d+)*)?/\n\t\t\t\t\t\t\t\t.source) +\n\t\t\t\t\t\t')' +\n\t\t\t\t\t\t/(?![\\w$])/.source\n\t\t\t\t),\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'operator':\n\t\t\t\t/--|\\+\\+|\\*\\*=?|=>|&&=?|\\|\\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/,\n\t\t\t$insertBefore: {\n\t\t\t\t'comment': {\n\t\t\t\t\t'doc-comment': {\n\t\t\t\t\t\tpattern: /\\/\\*\\*(?!\\/)[\\s\\S]*?(?:\\*\\/|$)/,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\tinside: 'jsdoc',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\t'regex': {\n\t\t\t\t\t\tpattern: RegExp(\n\t\t\t\t\t\t\t// lookbehind\n\t\t\t\t\t\t\t// eslint-disable-next-line regexp/no-dupe-characters-character-class\n\t\t\t\t\t\t\t/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source +\n\t\t\t\t\t\t\t\t// Regex pattern:\n\t\t\t\t\t\t\t\t// There are 2 regex patterns here. The RegExp set notation proposal added support for nested character\n\t\t\t\t\t\t\t\t// classes if the `v` flag is present. Unfortunately, nested CCs are both context-free and incompatible\n\t\t\t\t\t\t\t\t// with the only syntax, so we have to define 2 different regex patterns.\n\t\t\t\t\t\t\t\t/\\//.source +\n\t\t\t\t\t\t\t\t'(?:' +\n\t\t\t\t\t\t\t\t/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/\n\t\t\t\t\t\t\t\t\t.source +\n\t\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t\t// `v` flag syntax. This supports 3 levels of nested character classes.\n\t\t\t\t\t\t\t\t/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/\n\t\t\t\t\t\t\t\t\t.source +\n\t\t\t\t\t\t\t\t')' +\n\t\t\t\t\t\t\t\t// lookahead\n\t\t\t\t\t\t\t\t/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/\n\t\t\t\t\t\t\t\t\t.source\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'regex-source': {\n\t\t\t\t\t\t\t\tpattern: /^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,\n\t\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\t\talias: 'language-regex',\n\t\t\t\t\t\t\t\tinside: 'regex',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'regex-delimiter': /^\\/|\\/$/,\n\t\t\t\t\t\t\t'regex-flags': /^[a-z]+$/,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t// This must be declared before keyword because we use \"function\" inside the look-forward\n\t\t\t\t\t'function-variable': {\n\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,\n\t\t\t\t\t\talias: 'function',\n\t\t\t\t\t},\n\t\t\t\t\t'parameter': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tinside: 'javascript',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tinside: 'javascript',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tinside: 'javascript',\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tinside: 'javascript',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t'constant': /\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/,\n\t\t\t\t},\n\t\t\t\t'string': {\n\t\t\t\t\t'hashbang': {\n\t\t\t\t\t\tpattern: /^#!.*/,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\talias: 'comment',\n\t\t\t\t\t},\n\t\t\t\t\t'template-string': [\n\t\t\t\t\t\t...toArray(jsTemplates),\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: JS_TEMPLATE,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: /** @type {Grammar} */ ({\n\t\t\t\t\t\t\t\t'template-punctuation': {\n\t\t\t\t\t\t\t\t\tpattern: /^`|`$/,\n\t\t\t\t\t\t\t\t\talias: 'string',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'interpolation': {\n\t\t\t\t\t\t\t\t\tpattern: RegExp(\n\t\t\t\t\t\t\t\t\t\t/((?:^|[^\\\\])(?:\\\\{2})*)/.source +\n\t\t\t\t\t\t\t\t\t\t\tJS_TEMPLATE_INTERPOLATION.source\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t$rest: /** @type {Grammar['$rest']} */ ('javascript'),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'string': /[\\s\\S]+/,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t'string-property': {\n\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t/((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\talias: 'property',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'operator': {\n\t\t\t\t\t'literal-property': {\n\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t/((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'property',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n\n/**\n * @typedef {import('../types.d.ts').Grammar} Grammar\n * @typedef {import('../types.d.ts').GrammarTokens} GrammarTokens\n */\n"],"names":["javascript","id","base","clike","optional","alias","grammar","getOptionalLanguage","jsTemplates","pattern","lookbehind","inside","punctuation","keyword","function","number","RegExp","operator","$insertBefore","comment","greedy","regex","parameter","constant","string","hashbang","toArray","JS_TEMPLATE","interpolation","JS_TEMPLATE_INTERPOLATION","source","$rest"],"mappings":"0HAKA,IAAeA,EAAA,CACdC,GAAI,aACJC,KAAMC,EACNC,SAAU,eACVC,MAAO,KACP,OAAAC,EAASC,oBAAEA,IACV,MAAMC,EAA4CD,EAAoB,kBACrE,mBAGD,MAAO,CACN,aAAc,CACb,CACCE,QAAS,uEACTC,YAAY,EACZC,OAAQ,CACPC,YAAe,UAGjB,CACCH,QACC,0GACDC,YAAY,IAGdG,QAAW,CACV,CACCJ,QACC,mFACDC,YAAY,EACZL,MAAO,UAER,CACCI,QAAS,uBACTC,YAAY,EACZL,MAAO,gBAER,CACCI,QACC,wIACDC,YAAY,EACZL,MAAO,gBAER,CACCI,QACC,gTACDC,YAAY,IAIdI,SACC,oGACDC,OAAU,CACTN,QAASO,OACR,6OAuBDN,YAAY,GAEbO,SACC,4FACDC,cAAe,CACdC,QAAW,CACV,cAAe,CACdV,QAAS,iCACTW,QAAQ,EACRT,OAAQ,UAGVE,QAAW,CACVQ,MAAS,CACRZ,QAASO,OAGR,4WAkBDN,YAAY,EACZU,QAAQ,EACRT,OAAQ,CACP,eAAgB,CACfF,QAAS,4BACTC,YAAY,EACZL,MAAO,iBACPM,OAAQ,SAET,kBAAmB,UACnB,cAAe,aAIjB,oBAAqB,CACpBF,QACC,gMACDJ,MAAO,YAERiB,UAAa,CACZ,CACCb,QACC,sIACDC,YAAY,EACZC,OAAQ,cAET,CACCF,QACC,qFACDC,YAAY,EACZC,OAAQ,cAET,CACCF,QACC,kEACDC,YAAY,EACZC,OAAQ,cAET,CACCF,QACC,8eACDC,YAAY,EACZC,OAAQ,eAGVY,SAAY,6BAEbC,OAAU,CACTC,SAAY,CACXhB,QAAS,QACTW,QAAQ,EACRf,MAAO,WAER,kBAAmB,IACfqB,EAAQlB,GACX,CACCC,QAASkB,EACTP,QAAQ,EACRT,OAAgC,CAC/B,uBAAwB,CACvBF,QAAS,QACTJ,MAAO,UAERuB,cAAiB,CAChBnB,QAASO,OACR,8BACCa,EAA0BC,QAE5BpB,YAAY,EACZC,OAAQ,CACP,4BAA6B,CAC5BF,QAAS,YACTJ,MAAO,eAER0B,MAAwC,eAG1CP,OAAU,aAIb,kBAAmB,CAClBf,QACC,4EACDC,YAAY,EACZU,QAAQ,EACRf,MAAO,aAGTY,SAAY,CACX,mBAAoB,CACnBR,QACC,oFACDC,YAAY,EACZL,MAAO,cAKX"}