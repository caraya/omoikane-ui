{"version":3,"file":"shell-session.js","sources":["../../src/languages/shell-session.js"],"sourcesContent":["import bash from './bash.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'shell-session'>} */\nexport default {\n\tid: 'shell-session',\n\trequire: bash,\n\talias: ['sh-session', 'shellsession'],\n\tgrammar () {\n\t\t// CAREFUL!\n\t\t// The following patterns are concatenated, so the group referenced by a back reference is non-obvious!\n\n\t\tconst strings = [\n\t\t\t// normal string\n\t\t\t/\"(?:\\\\[\\s\\S]|\\$\\([^)]+\\)|\\$(?!\\()|`[^`]+`|[^\"\\\\`$])*\"/.source,\n\t\t\t/'[^']*'/.source,\n\t\t\t/\\$'(?:[^'\\\\]|\\\\[\\s\\S])*'/.source,\n\n\t\t\t// here doc\n\t\t\t// 2 capturing groups\n\t\t\t/<<-?\\s*([\"']?)(\\w+)\\1\\s[\\s\\S]*?[\\r\\n]\\2/.source,\n\t\t].join('|');\n\n\t\treturn {\n\t\t\t'command': {\n\t\t\t\tpattern: RegExp(\n\t\t\t\t\t// user info\n\t\t\t\t\t/^/.source +\n\t\t\t\t\t\t'(?:' +\n\t\t\t\t\t\t// <user> \":\" ( <path> )?\n\t\t\t\t\t\t(/[^\\s@:$#%*!/\\\\]+@[^\\r\\n@:$#%*!/\\\\]+(?::[^\\0-\\x1F$#%*?\"<>:;|]+)?/.source +\n\t\t\t\t\t\t\t'|' +\n\t\t\t\t\t\t\t// <path>\n\t\t\t\t\t\t\t// Since the path pattern is quite general, we will require it to start with a special character to\n\t\t\t\t\t\t\t// prevent false positives.\n\t\t\t\t\t\t\t/[/~.][^\\0-\\x1F$#%*?\"<>@:;|]*/.source) +\n\t\t\t\t\t\t')?' +\n\t\t\t\t\t\t// shell symbol\n\t\t\t\t\t\t/[$#%](?=\\s)/.source +\n\t\t\t\t\t\t// bash command\n\t\t\t\t\t\t/(?:[^\\\\\\r\\n \\t'\"<$]|[ \\t](?:(?!#)|#.*$)|\\\\(?:[^\\r]|\\r\\n?)|\\$(?!')|<(?!<)|<<str>>)+/.source.replace(\n\t\t\t\t\t\t\t/<<str>>/g,\n\t\t\t\t\t\t\t() => strings\n\t\t\t\t\t\t),\n\t\t\t\t\t'm'\n\t\t\t\t),\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'info': {\n\t\t\t\t\t\t// foo@bar:~/files$ exit\n\t\t\t\t\t\t// foo@bar$ exit\n\t\t\t\t\t\t// ~/files$ exit\n\t\t\t\t\t\tpattern: /^[^#$%]+/,\n\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'user': /^[^\\s@:$#%*!/\\\\]+@[^\\r\\n@:$#%*!/\\\\]+/,\n\t\t\t\t\t\t\t'punctuation': /:/,\n\t\t\t\t\t\t\t'path': /[\\s\\S]+/,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t'bash': {\n\t\t\t\t\t\tpattern: /(^[$#%]\\s*)\\S[\\s\\S]*/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'language-bash',\n\t\t\t\t\t\tinside: 'bash',\n\t\t\t\t\t},\n\t\t\t\t\t'shell-symbol': {\n\t\t\t\t\t\tpattern: /^[$#%]/,\n\t\t\t\t\t\talias: 'important',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t'output': /.(?:.*(?:[\\r\\n]|.$))*/,\n\t\t};\n\t},\n};\n"],"names":["shellSession","id","require","bash","alias","grammar","command","pattern","RegExp","replace","greedy","inside","info","user","punctuation","path","lookbehind","output"],"mappings":"yBAGA,IAAeA,EAAA,CACdC,GAAI,gBACJC,QAASC,EACTC,MAAO,CAAC,aAAc,gBACtBC,QAAQ,KAeA,CACNC,QAAW,CACVC,QAASC,OAER,wHAaC,2FAA4FC,QAC3F,YACA,IA9BW,iJAgCb,KAEDC,QAAQ,EACRC,OAAQ,CACPC,KAAQ,CAIPL,QAAS,WACTH,MAAO,cACPO,OAAQ,CACPE,KAAQ,uCACRC,YAAe,IACfC,KAAQ,YAGVZ,KAAQ,CACPI,QAAS,uBACTS,YAAY,EACZZ,MAAO,gBACPO,OAAQ,QAET,eAAgB,CACfJ,QAAS,SACTH,MAAO,eAIVa,OAAU"}