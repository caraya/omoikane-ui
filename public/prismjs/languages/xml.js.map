{"version":3,"file":"xml.js","sources":["../../src/languages/xml.js"],"sourcesContent":["import { MARKUP_TAG } from '../shared/languages/patterns.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'xml'>} */\nexport default {\n\tid: 'xml',\n\talias: ['ssml', 'atom', 'rss'],\n\tgrammar () {\n\t\tconst entity = [\n\t\t\t{\n\t\t\t\tpattern: /&[\\da-z]{1,8};/i,\n\t\t\t\talias: 'named-entity',\n\t\t\t},\n\t\t\t/&#x?[\\da-f]{1,8};/i,\n\t\t];\n\n\t\treturn {\n\t\t\t'comment': {\n\t\t\t\tpattern: /<!--(?:(?!<!--)[\\s\\S])*?-->/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'prolog': {\n\t\t\t\tpattern: /<\\?[\\s\\S]+?\\?>/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'doctype': {\n\t\t\t\t// https://www.w3.org/TR/xml/#NT-doctypedecl\n\t\t\t\tpattern:\n\t\t\t\t\t/<!DOCTYPE(?:[^>\"'[\\]]|\"[^\"]*\"|'[^']*')+(?:\\[(?:[^<\"'\\]]|\"[^\"]*\"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\\]\\s*)?>/i,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'internal-subset': {\n\t\t\t\t\t\tpattern: /(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\tinside: 'xml',\n\t\t\t\t\t},\n\t\t\t\t\t'string': {\n\t\t\t\t\t\tpattern: /\"[^\"]*\"|'[^']*'/,\n\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /^<!|>$|[[\\]]/,\n\t\t\t\t\t'doctype-tag': /^DOCTYPE/i,\n\t\t\t\t\t'name': /[^\\s<>'\"]+/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'cdata': {\n\t\t\t\tpattern: /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/i,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'tag': {\n\t\t\t\tpattern: MARKUP_TAG,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'tag': {\n\t\t\t\t\t\tpattern: /^(<\\/?)[^\\s>\\/]+/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t'attr-value': {\n\t\t\t\t\t\tpattern: /=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'punctuation': [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^=/,\n\t\t\t\t\t\t\t\t\talias: 'attr-equals',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpattern: /^(\\s*)[\"']|[\"']$/,\n\t\t\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t'entity': entity,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /^<\\/?|\\/?>$/,\n\t\t\t\t\t'attr-name': {\n\t\t\t\t\t\tpattern: /[^\\s>\\/]+/,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'namespace': /^[^\\s>\\/:]+:/,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t'entity': entity,\n\t\t};\n\t},\n\teffect (Prism) {\n\t\t// Plugin to make entity title show the real entity, idea by Roman Komarov\n\t\treturn Prism.hooks.add('wrap', env => {\n\t\t\tif (env.type === 'entity') {\n\t\t\t\tenv.attributes['title'] = env.content.replace(/&amp;/, '&');\n\t\t\t}\n\t\t});\n\t},\n};\n"],"names":["xml","id","alias","grammar","entity","pattern","comment","greedy","prolog","doctype","inside","lookbehind","string","punctuation","name","cdata","tag","MARKUP_TAG","namespace","effect","Prism","hooks","add","env","type","attributes","content","replace"],"mappings":"4CAGA,IAAeA,EAAA,CACdC,GAAI,MACJC,MAAO,CAAC,OAAQ,OAAQ,OACxB,OAAAC,GACC,MAAMC,EAAS,CACd,CACCC,QAAS,kBACTH,MAAO,gBAER,sBAGD,MAAO,CACNI,QAAW,CACVD,QAAS,8BACTE,QAAQ,GAETC,OAAU,CACTH,QAAS,iBACTE,QAAQ,GAETE,QAAW,CAEVJ,QACC,uHACDE,QAAQ,EACRG,OAAQ,CACP,kBAAmB,CAClBL,QAAS,6BACTM,YAAY,EACZJ,QAAQ,EACRG,OAAQ,OAETE,OAAU,CACTP,QAAS,kBACTE,QAAQ,GAETM,YAAe,eACf,cAAe,YACfC,KAAQ,eAGVC,MAAS,CACRV,QAAS,4BACTE,QAAQ,GAETS,IAAO,CACNX,QAASY,EACTV,QAAQ,EACRG,OAAQ,CACPM,IAAO,CACNX,QAAS,mBACTM,YAAY,EACZD,OAAQ,CACPQ,UAAa,iBAGf,aAAc,CACbb,QAAS,qCACTK,OAAQ,CACPG,YAAe,CACd,CACCR,QAAS,KACTH,MAAO,eAER,CACCG,QAAS,mBACTM,YAAY,IAGdP,OAAUA,IAGZS,YAAe,cACf,YAAa,CACZR,QAAS,YACTK,OAAQ,CACPQ,UAAa,mBAKjBd,OAAUA,EAEX,EACDe,OAAQC,GAEAA,EAAMC,MAAMC,IAAI,QAAQC,IACb,WAAbA,EAAIC,OACPD,EAAIE,WAAkB,MAAIF,EAAIG,QAAQC,QAAQ,QAAS,KAC3D"}