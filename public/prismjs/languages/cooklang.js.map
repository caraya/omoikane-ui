{"version":3,"file":"cooklang.js","sources":["../../src/languages/cooklang.js"],"sourcesContent":["/** @type {import('../types.d.ts').LanguageProto<'cooklang'>} */\nexport default {\n\tid: 'cooklang',\n\tgrammar () {\n\t\t// see https://github.com/cooklang/spec/blob/main/EBNF.md\n\n\t\tconst single_token_suffix = /(?:(?!\\s)[\\d$+<=a-zA-Z\\x80-\\uFFFF])+/.source;\n\t\tconst multi_token_infix = /[^{}@#]+/.source;\n\t\tconst multi_token_suffix = /\\{[^}#@]*\\}/.source;\n\n\t\tconst multi_token = multi_token_infix + multi_token_suffix;\n\n\t\tconst timer_units = /(?:h|hours|hrs|m|min|minutes)/.source;\n\n\t\tconst amount_group_impl = {\n\t\t\tpattern: /\\{[^{}]*\\}/,\n\t\t\tinside: {\n\t\t\t\t'amount': {\n\t\t\t\t\tpattern: /([\\{|])[^{}|*%]+/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'number',\n\t\t\t\t},\n\t\t\t\t'unit': {\n\t\t\t\t\tpattern: /(%)[^}]+/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'symbol',\n\t\t\t\t},\n\t\t\t\t'servings-scaler': {\n\t\t\t\t\tpattern: /\\*/,\n\t\t\t\t\talias: 'operator',\n\t\t\t\t},\n\t\t\t\t'servings-alternative-separator': {\n\t\t\t\t\tpattern: /\\|/,\n\t\t\t\t\talias: 'operator',\n\t\t\t\t},\n\t\t\t\t'unit-separator': {\n\t\t\t\t\tpattern: /(?:%|(\\*)%)/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'operator',\n\t\t\t\t},\n\t\t\t\t'punctuation': /[{}]/,\n\t\t\t},\n\t\t};\n\n\t\treturn {\n\t\t\t'comment': {\n\t\t\t\t// [- comment -]\n\t\t\t\t// -- comment\n\t\t\t\tpattern: /\\[-[\\s\\S]*?-\\]|--.*/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'meta': {\n\t\t\t\t// >> key: value\n\t\t\t\tpattern: />>.*:.*/,\n\t\t\t\tinside: {\n\t\t\t\t\t'property': {\n\t\t\t\t\t\t// key:\n\t\t\t\t\t\tpattern: /(>>\\s*)[^\\s:](?:[^:]*[^\\s:])?/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t'cookware-group': {\n\t\t\t\t// #...{...}, #...\n\t\t\t\tpattern: new RegExp('#(?:' + multi_token + '|' + single_token_suffix + ')'),\n\t\t\t\tinside: {\n\t\t\t\t\t'cookware': {\n\t\t\t\t\t\tpattern: new RegExp('(^#)(?:' + multi_token_infix + ')'),\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'variable',\n\t\t\t\t\t},\n\t\t\t\t\t'cookware-keyword': {\n\t\t\t\t\t\tpattern: /^#/,\n\t\t\t\t\t\talias: 'keyword',\n\t\t\t\t\t},\n\t\t\t\t\t'quantity-group': {\n\t\t\t\t\t\tpattern: new RegExp(/\\{[^{}@#]*\\}/),\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'quantity': {\n\t\t\t\t\t\t\t\tpattern: new RegExp(/(^\\{)/.source + multi_token_infix),\n\t\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\t\talias: 'number',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'punctuation': /[{}]/,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\t'ingredient-group': {\n\t\t\t\t// @...{...}, @...\n\t\t\t\tpattern: new RegExp('@(?:' + multi_token + '|' + single_token_suffix + ')'),\n\t\t\t\tinside: {\n\t\t\t\t\t'ingredient': {\n\t\t\t\t\t\tpattern: new RegExp('(^@)(?:' + multi_token_infix + ')'),\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'variable',\n\t\t\t\t\t},\n\t\t\t\t\t'ingredient-keyword': {\n\t\t\t\t\t\tpattern: /^@/,\n\t\t\t\t\t\talias: 'keyword',\n\t\t\t\t\t},\n\t\t\t\t\t'amount-group': amount_group_impl,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'timer-group': {\n\t\t\t\t// ~timer{...}\n\t\t\t\tpattern: /~(?!\\s)[^@#~{}]*\\{[^{}]*\\}/,\n\t\t\t\tinside: {\n\t\t\t\t\t'timer': {\n\t\t\t\t\t\tpattern: /(^~)[^{]+/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: 'variable',\n\t\t\t\t\t},\n\t\t\t\t\t'duration-group': {\n\t\t\t\t\t\t// {...}\n\t\t\t\t\t\tpattern: /\\{[^{}]*\\}/,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'punctuation': /[{}]/,\n\t\t\t\t\t\t\t'unit': {\n\t\t\t\t\t\t\t\tpattern: new RegExp(/(%\\s*)/.source + timer_units + /\\b/.source),\n\t\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\t\talias: 'symbol',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'operator': /%/,\n\t\t\t\t\t\t\t'duration': {\n\t\t\t\t\t\t\t\tpattern: /\\d+/,\n\t\t\t\t\t\t\t\talias: 'number',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t'timer-keyword': {\n\t\t\t\t\t\tpattern: /^~/,\n\t\t\t\t\t\talias: 'keyword',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n"],"names":["cooklang","id","grammar","single_token_suffix","multi_token_infix","multi_token","comment","pattern","greedy","meta","inside","property","lookbehind","RegExp","cookware","alias","quantity","punctuation","ingredient","amount","unit","timer","operator","duration"],"mappings":"AACA,IAAeA,EAAA,CACdC,GAAI,WACJ,OAAAC,GAGC,MAAMC,EAAsB,2CACtBC,EAAoB,WAGpBC,EAAcD,EAFO,gBAoC3B,MAAO,CACNE,QAAW,CAGVC,QAAS,sBACTC,QAAQ,GAETC,KAAQ,CAEPF,QAAS,UACTG,OAAQ,CACPC,SAAY,CAEXJ,QAAS,gCACTK,YAAY,KAIf,iBAAkB,CAEjBL,QAAaM,OAAO,OAASR,EAAc,IAAMF,EAAsB,KACvEO,OAAQ,CACPI,SAAY,CACXP,QAAaM,OAAO,UAAYT,EAAoB,KACpDQ,YAAY,EACZG,MAAO,YAER,mBAAoB,CACnBR,QAAS,KACTQ,MAAO,WAER,iBAAkB,CACjBR,QAAaM,OAAO,gBACpBH,OAAQ,CACPM,SAAY,CACXT,QAAaM,OAAO,SAAiBT,GACrCQ,YAAY,EACZG,MAAO,UAERE,YAAe,WAKnB,mBAAoB,CAEnBV,QAAaM,OAAO,OAASR,EAAc,IAAMF,EAAsB,KACvEO,OAAQ,CACPQ,WAAc,CACbX,QAAaM,OAAO,UAAYT,EAAoB,KACpDQ,YAAY,EACZG,MAAO,YAER,qBAAsB,CACrBR,QAAS,KACTQ,MAAO,WAER,eAvFuB,CACzBR,QAAS,aACTG,OAAQ,CACPS,OAAU,CACTZ,QAAS,mBACTK,YAAY,EACZG,MAAO,UAERK,KAAQ,CACPb,QAAS,WACTK,YAAY,EACZG,MAAO,UAER,kBAAmB,CAClBR,QAAS,KACTQ,MAAO,YAER,iCAAkC,CACjCR,QAAS,KACTQ,MAAO,YAER,iBAAkB,CACjBR,QAAS,cACTK,YAAY,EACZG,MAAO,YAERE,YAAe,WAgEhB,cAAe,CAEdV,QAAS,6BACTG,OAAQ,CACPW,MAAS,CACRd,QAAS,YACTK,YAAY,EACZG,MAAO,YAER,iBAAkB,CAEjBR,QAAS,aACTG,OAAQ,CACPO,YAAe,OACfG,KAAQ,CACPb,QAAaM,OAAO,2CACpBD,YAAY,EACZG,MAAO,UAERO,SAAY,IACZC,SAAY,CACXhB,QAAS,MACTQ,MAAO,YAIV,gBAAiB,CAChBR,QAAS,KACTQ,MAAO,aAKX"}