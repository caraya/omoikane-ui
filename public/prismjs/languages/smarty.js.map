{"version":3,"file":"smarty.js","sources":["../../src/languages/smarty.js"],"sourcesContent":["import { embeddedIn } from '../shared/languages/templating.js';\nimport markup from './markup.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'smarty'>} */\nexport default {\n\tid: 'smarty',\n\trequire: markup,\n\tgrammar () {\n\t\tconst expression = {\n\t\t\tpattern: /[\\s\\S]+/,\n\t\t\tinside: /** @type {GrammarToken['inside']} */ (null),\n\t\t};\n\n\t\tconst smarty = {\n\t\t\t'string': [\n\t\t\t\t{\n\t\t\t\t\tpattern: /\"(?:\\\\.|[^\"\\\\\\r\\n])*\"/,\n\t\t\t\t\tgreedy: true,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'interpolation': {\n\t\t\t\t\t\t\tpattern: /\\{[^{}]*\\}|`[^`]*`/,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\t\t\t\tpattern: /^[{`]|[`}]$/,\n\t\t\t\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'expression': expression,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'variable': /\\$\\w+/,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern: /'(?:\\\\.|[^'\\\\\\r\\n])*'/,\n\t\t\t\t\tgreedy: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\t'keyword': {\n\t\t\t\tpattern: /(^\\{\\/?)[a-z_]\\w*\\b(?!\\()/i,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'delimiter': {\n\t\t\t\tpattern: /^\\{\\/?|\\}$/,\n\t\t\t\tgreedy: true,\n\t\t\t\talias: 'punctuation',\n\t\t\t},\n\t\t\t'number': /\\b0x[\\dA-Fa-f]+|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:[Ee][-+]?\\d+)?/,\n\t\t\t'variable': [\n\t\t\t\t/\\$(?!\\d)\\w+/,\n\t\t\t\t/#(?!\\d)\\w+#/,\n\t\t\t\t{\n\t\t\t\t\tpattern: /(\\.|->|\\w\\s*=)(?!\\d)\\w+\\b(?!\\()/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern: /(\\[)(?!\\d)\\w+(?=\\])/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\t'function': {\n\t\t\t\tpattern: /(\\|\\s*)@?[a-z_]\\w*|\\b[a-z_]\\w*(?=\\()/i,\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\t\t\t'attr-name': /\\b[a-z_]\\w*(?=\\s*=)/i,\n\t\t\t'boolean': /\\b(?:false|no|off|on|true|yes)\\b/,\n\t\t\t'punctuation': /[\\[\\](){}.,:`]|->/,\n\t\t\t'operator': [\n\t\t\t\t/[+\\-*\\/%]|==?=?|[!<>]=?|&&|\\|\\|?/,\n\t\t\t\t/\\bis\\s+(?:not\\s+)?(?:div|even|odd)(?:\\s+by)?\\b/,\n\t\t\t\t/\\b(?:and|eq|gt?e|gt|lt?e|lt|mod|neq?|not|or)\\b/,\n\t\t\t],\n\t\t};\n\n\t\texpression.inside = smarty;\n\n\t\tconst string = /\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|'(?:\\\\.|[^'\\\\\\r\\n])*'/;\n\t\tconst smartyPattern = RegExp(\n\t\t\t/\\{(?:[^{}\"']|<str>|\\{(?:[^{}\"']|<str>|\\{(?:[^{}\"']|<str>)*\\})*\\})*\\}/.source.replace(\n\t\t\t\t/<str>/g,\n\t\t\t\t() => string.source\n\t\t\t)\n\t\t);\n\n\t\treturn {\n\t\t\t'ignore-literal': {\n\t\t\t\tpattern: /(\\{literal\\})[\\s\\S]*?(?=\\{\\/literal\\})/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'embedded-php': {\n\t\t\t\tpattern: /(\\{php\\})[\\s\\S]*?(?=\\{\\/php\\})/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tgreedy: true,\n\t\t\t\talias: ['php', 'language-php'],\n\t\t\t\tinside: 'php',\n\t\t\t},\n\t\t\t'smarty-comment': {\n\t\t\t\tpattern: /\\{\\*[\\s\\S]*?\\*\\}/,\n\t\t\t\tgreedy: true,\n\t\t\t\talias: 'comment',\n\t\t\t},\n\t\t\t'smarty': {\n\t\t\t\tpattern: smartyPattern,\n\t\t\t\tgreedy: true,\n\t\t\t\tinside: smarty,\n\t\t\t},\n\t\t\t$tokenize: embeddedIn('markup'),\n\t\t};\n\t},\n};\n\n/**\n * @typedef {import('../types.d.ts').GrammarToken} GrammarToken\n */\n"],"names":["smarty","id","require","markup","grammar","expression","pattern","inside","string","greedy","interpolation","alias","variable","keyword","lookbehind","delimiter","number","function","boolean","punctuation","operator","RegExp","replace","source","$tokenize","embeddedIn"],"mappings":"mTAIA,IAAeA,EAAA,CACdC,GAAI,SACJC,QAASC,EACT,OAAAC,GACC,MAAMC,EAAa,CAClBC,QAAS,UACTC,OAA+C,MAG1CP,EAAS,CACdQ,OAAU,CACT,CACCF,QAAS,wBACTG,QAAQ,EACRF,OAAQ,CACPG,cAAiB,CAChBJ,QAAS,qBACTC,OAAQ,CACP,4BAA6B,CAC5BD,QAAS,cACTK,MAAO,eAERN,WAAcA,IAGhBO,SAAY,UAGd,CACCN,QAAS,wBACTG,QAAQ,IAGVI,QAAW,CACVP,QAAS,6BACTQ,YAAY,EACZL,QAAQ,GAETM,UAAa,CACZT,QAAS,aACTG,QAAQ,EACRE,MAAO,eAERK,OAAU,+DACVJ,SAAY,CACX,cACA,cACA,CACCN,QAAS,kCACTQ,YAAY,GAEb,CACCR,QAAS,sBACTQ,YAAY,IAGdG,SAAY,CACXX,QAAS,wCACTQ,YAAY,GAEb,YAAa,uBACbI,QAAW,mCACXC,YAAe,oBACfC,SAAY,CACX,mCACA,iDACA,mDAIFf,EAAWE,OAASP,EAEpB,MAAMQ,EAAS,8CAQf,MAAO,CACN,iBAAkB,CACjBF,QAAS,yCACTQ,YAAY,EACZL,QAAQ,GAET,eAAgB,CACfH,QAAS,iCACTQ,YAAY,EACZL,QAAQ,EACRE,MAAO,CAAC,MAAO,gBACfJ,OAAQ,OAET,iBAAkB,CACjBD,QAAS,mBACTG,QAAQ,EACRE,MAAO,WAERX,OAAU,CACTM,QA1BoBe,OACrB,gFAA8EC,QAC7E,UACA,IAAMd,EAAOe,UAwBbd,QAAQ,EACRF,OAAQP,GAETwB,UAAWC,EAAW,UAEvB"}