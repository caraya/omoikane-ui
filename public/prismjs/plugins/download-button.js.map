{"version":3,"file":"download-button.js","sources":["../../src/plugins/download-button/download-button.js"],"sourcesContent":["import prism from '../../global.js';\nimport { getParentPre } from '../../shared/dom-util.js';\nimport toolbar from '../toolbar/toolbar.js';\n\n/** @type {import('../../types.d.ts').PluginProto<'download-button'>} */\nconst Self = {\n\tid: 'download-button',\n\trequire: toolbar,\n\teffect (Prism) {\n\t\t/** @type {import('../toolbar/toolbar.js').Toolbar} */\n\t\tconst toolbar = Prism.pluginRegistry.peek('toolbar')?.plugin;\n\n\t\treturn toolbar.registerButton('download-file', env => {\n\t\t\tconst pre = getParentPre(env.element);\n\t\t\tif (!pre) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst src = pre.getAttribute('data-src') || pre.getAttribute('data-download-link');\n\t\t\tif (!src) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst a = document.createElement('a');\n\t\t\ta.textContent = pre.getAttribute('data-download-link-label') || 'Download';\n\t\t\ta.setAttribute('download', '');\n\t\t\ta.href = src;\n\t\t\treturn a;\n\t\t});\n\t},\n};\n\nexport default Self;\n\nprism.pluginRegistry.add(Self);\n"],"names":["Self","id","require","toolbar","effect","Prism","pluginRegistry","peek","plugin","registerButton","env","pre","getParentPre","element","src","getAttribute","a","document","createElement","textContent","setAttribute","href","prism","add"],"mappings":"oMAKK,MAACA,EAAO,CACZC,GAAI,kBACJC,QAASC,EACT,MAAAC,CAAQC,GAEP,MAAMF,EAAUE,EAAMC,eAAeC,KAAK,YAAYC,OAEtD,OAAOL,EAAQM,eAAe,iBAAiBC,IAC9C,MAAMC,EAAMC,EAAaF,EAAIG,SAC7B,IAAKF,EACJ,OAGD,MAAMG,EAAMH,EAAII,aAAa,aAAeJ,EAAII,aAAa,sBAC7D,IAAKD,EACJ,OAGD,MAAME,EAAIC,SAASC,cAAc,KAIjC,OAHAF,EAAEG,YAAcR,EAAII,aAAa,6BAA+B,WAChEC,EAAEI,aAAa,WAAY,IAC3BJ,EAAEK,KAAOP,EACFE,CAAC,GAET,GAKFM,EAAMhB,eAAeiB,IAAIvB"}