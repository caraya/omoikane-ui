import{p as t}from"../prism-DU08x7FD.js";import e from"./toolbar.js";import"../util-DdJteTVJ.js";import"../token-Dozwbq7Q.js";import"../insert-CpDsPTVw.js";import"../iterables-BnTatl6v.js";function o(t){const e=document.createElement("textarea");e.value=t.getText(),e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{const e=document.execCommand("copy");setTimeout((()=>{e?t.success():t.error(void 0)}),1)}catch(e){setTimeout((()=>{t.error(e)}),1)}document.body.removeChild(e)}function r(t,e){let o=t;for(;o;o=o.parentElement){const t=o.getAttribute(e);if(null!==t)return t}return null}const c={id:"copy-to-clipboard",require:e,effect(t){const e=t.pluginRegistry.peek("toolbar")?.plugin;return e.registerButton("copy-to-clipboard",(t=>{const e=t.element,c=(t=>{const e={copy:"Copy","copy-error":"Press Ctrl+C to copy","copy-success":"Copied!","copy-timeout":5e3};for(const o in e){const c=o,n=r(t,"data-prismjs-"+c);if(n)if("copy-timeout"===c){const t=+n;Number.isNaN(t)||(e[c]=t)}else e[c]=n}return e})(e),n=document.createElement("button");n.className="copy-to-clipboard-button",n.setAttribute("type","button");const s=document.createElement("span");return n.appendChild(s),p("copy"),((t,e)=>{t.addEventListener("click",(()=>{(t=>{navigator.clipboard?navigator.clipboard.writeText(t.getText()).then(t.success,(()=>{o(t)})):o(t)})(e)}))})(n,{getText:()=>e.textContent||"",success(){p("copy-success"),i()},error(){p("copy-error"),setTimeout((()=>{(t=>{window.getSelection()?.selectAllChildren(t)})(e)}),1),i()}}),n;function i(){setTimeout((()=>p("copy")),c["copy-timeout"])}function p(t){s.textContent=c[t],n.setAttribute("data-copy-state",t)}}))}};t.pluginRegistry.add(c);export{c as default};
