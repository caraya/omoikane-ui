{"version":3,"file":"kumir.js","sources":["../../src/languages/kumir.js"],"sourcesContent":["/* eslint-disable regexp/no-dupe-characters-character-class */\n\n/** @type {import('../types.d.ts').LanguageProto<'kumir'>} */\nexport default {\n\tid: 'kumir',\n\talias: 'kum',\n\tgrammar () {\n\t\t/**\n\t\t * Regular expression for characters that are not allowed in identifiers.\n\t\t */\n\t\tconst nonId = /\\s\\x00-\\x1f\\x22-\\x2f\\x3a-\\x3f\\x5b-\\x5e\\x60\\x7b-\\x7e/.source;\n\n\t\t/**\n\t\t * Surround a regular expression for IDs with patterns for non-ID sequences.\n\t\t *\n\t\t * @param {string} pattern A regular expression for identifiers.\n\t\t * @param {string} [flags] The regular expression flags.\n\t\t * @returns {RegExp} A wrapped regular expression for identifiers.\n\t\t */\n\t\tfunction wrapId (pattern, flags) {\n\t\t\treturn RegExp(pattern.replace(/<nonId>/g, nonId), flags);\n\t\t}\n\n\t\treturn {\n\t\t\t'comment': {\n\t\t\t\tpattern: /\\|.*/,\n\t\t\t},\n\n\t\t\t'prolog': {\n\t\t\t\tpattern: /#.*/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\n\t\t\t'string': {\n\t\t\t\tpattern: /\"[^\\n\\r\"]*\"|'[^\\n\\r']*'/,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\n\t\t\t'boolean': {\n\t\t\t\tpattern: wrapId(/(^|[<nonId>])(?:да|нет)(?=[<nonId>]|$)/.source),\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\n\t\t\t'operator-word': {\n\t\t\t\tpattern: wrapId(/(^|[<nonId>])(?:и|или|не)(?=[<nonId>]|$)/.source),\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'keyword',\n\t\t\t},\n\n\t\t\t'system-variable': {\n\t\t\t\tpattern: wrapId(/(^|[<nonId>])знач(?=[<nonId>]|$)/.source),\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'keyword',\n\t\t\t},\n\n\t\t\t'type': [\n\t\t\t\t{\n\t\t\t\t\tpattern: wrapId(\n\t\t\t\t\t\t/(^|[<nonId>])(?:вещ|лит|лог|сим|цел)(?:\\x20*таб)?(?=[<nonId>]|$)/.source\n\t\t\t\t\t),\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'builtin',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpattern: wrapId(\n\t\t\t\t\t\t/(^|[<nonId>])(?:компл|сканкод|файл|цвет)(?=[<nonId>]|$)/.source\n\t\t\t\t\t),\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\talias: 'important',\n\t\t\t\t},\n\t\t\t],\n\n\t\t\t/**\n\t\t\t * Should be performed after searching for type names because of \"таб\".\n\t\t\t * \"таб\" is a reserved word, but never used without a preceding type name.\n\t\t\t * \"НАЗНАЧИТЬ\", \"Фввод\", and \"Фвывод\" are not reserved words.\n\t\t\t */\n\t\t\t'keyword': {\n\t\t\t\tpattern: wrapId(\n\t\t\t\t\t/(^|[<nonId>])(?:алг|арг(?:\\x20*рез)?|ввод|ВКЛЮЧИТЬ|вс[её]|выбор|вывод|выход|дано|для|до|дс|если|иначе|исп|использовать|кон(?:(?:\\x20+|_)исп)?|кц(?:(?:\\x20+|_)при)?|надо|нач|нс|нц|от|пауза|пока|при|раза?|рез|стоп|таб|то|утв|шаг)(?=[<nonId>]|$)/\n\t\t\t\t\t\t.source\n\t\t\t\t),\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\n\t\t\t/** Should be performed after searching for reserved words. */\n\t\t\t'name': {\n\t\t\t\tpattern: wrapId(\n\t\t\t\t\t// eslint-disable-next-line regexp/no-super-linear-backtracking\n\t\t\t\t\t/(^|[<nonId>])[^\\d<nonId>][^<nonId>]*(?:\\x20+[^<nonId>]+)*(?=[<nonId>]|$)/\n\t\t\t\t\t\t.source\n\t\t\t\t),\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\n\t\t\t/** Should be performed after searching for names. */\n\t\t\t'number': {\n\t\t\t\tpattern: wrapId(\n\t\t\t\t\t/(^|[<nonId>])(?:\\B\\$[\\da-f]+\\b|(?:\\b\\d+(?:\\.\\d*)?|\\B\\.\\d+)(?:e[+-]?\\d+)?)(?=[<nonId>]|$)/\n\t\t\t\t\t\t.source,\n\t\t\t\t\t'i'\n\t\t\t\t),\n\t\t\t\tlookbehind: true,\n\t\t\t},\n\n\t\t\t/** Should be performed after searching for words. */\n\t\t\t'punctuation': /:=|[(),:;\\[\\]]/,\n\n\t\t\t/**\n\t\t\t * Should be performed after searching for\n\t\t\t * - numeric constants (because of \"+\" and \"-\");\n\t\t\t * - punctuation marks (because of \":=\" and \"=\").\n\t\t\t */\n\t\t\t'operator-char': {\n\t\t\t\tpattern: /\\*\\*?|<[=>]?|>=?|[-+/=]/,\n\t\t\t\talias: 'operator',\n\t\t\t},\n\t\t};\n\t},\n};\n"],"names":["kumir","id","alias","grammar","wrapId","pattern","flags","RegExp","replace","comment","prolog","greedy","string","boolean","lookbehind","type","keyword","name","number","punctuation"],"mappings":"AAGA,IAAeA,EAAA,CACdC,GAAI,QACJC,MAAO,MACP,OAAAC,GAaC,SAASC,EAAQC,EAASC,GACzB,OAAOC,OAAOF,EAAQG,QAAQ,WAVjB,mEAUqCF,EACrD,CAEE,MAAO,CACNG,QAAW,CACVJ,QAAS,QAGVK,OAAU,CACTL,QAAS,MACTM,QAAQ,GAGTC,OAAU,CACTP,QAAS,0BACTM,QAAQ,GAGTE,QAAW,CACVR,QAASD,EAAO,0CAChBU,YAAY,GAGb,gBAAiB,CAChBT,QAASD,EAAO,4CAChBU,YAAY,EACZZ,MAAO,WAGR,kBAAmB,CAClBG,QAASD,EAAO,oCAChBU,YAAY,EACZZ,MAAO,WAGRa,KAAQ,CACP,CACCV,QAASD,EACR,qEAEDU,YAAY,EACZZ,MAAO,WAER,CACCG,QAASD,EACR,2DAEDU,YAAY,EACZZ,MAAO,cASTc,QAAW,CACVX,QAASD,EACR,yPAGDU,YAAY,GAIbG,KAAQ,CACPZ,QAASD,EAER,8EAGDU,YAAY,GAIbI,OAAU,CACTb,QAASD,EACR,uGAEA,KAEDU,YAAY,GAIbK,YAAe,iBAOf,gBAAiB,CAChBd,QAAS,0BACTH,MAAO,YAGT"}