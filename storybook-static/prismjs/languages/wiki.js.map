{"version":3,"file":"wiki.js","sources":["../../src/languages/wiki.js"],"sourcesContent":["import markup from './markup.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'wiki'>} */\nexport default {\n\tid: 'wiki',\n\tbase: markup,\n\tgrammar ({ base }) {\n\t\tconst tag = /** @type {import('../types.d.ts').GrammarToken} */ (base['tag']);\n\n\t\treturn {\n\t\t\t'block-comment': {\n\t\t\t\tpattern: /(^|[^\\\\])\\/\\*[\\s\\S]*?\\*\\//,\n\t\t\t\tlookbehind: true,\n\t\t\t\talias: 'comment',\n\t\t\t},\n\t\t\t'heading': {\n\t\t\t\tpattern: /^(=+)[^=\\r\\n].*?\\1/m,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /^=+|=+$/,\n\t\t\t\t\t'important': /.+/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'emphasis': {\n\t\t\t\t// TODO Multi-line\n\t\t\t\tpattern: /('{2,5}).+?\\1/,\n\t\t\t\tinside: {\n\t\t\t\t\t'bold-italic': {\n\t\t\t\t\t\tpattern: /(''''').+?(?=\\1)/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\talias: ['bold', 'italic'],\n\t\t\t\t\t},\n\t\t\t\t\t'bold': {\n\t\t\t\t\t\tpattern: /(''')[^'](?:.*?[^'])?(?=\\1)/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t},\n\t\t\t\t\t'italic': {\n\t\t\t\t\t\tpattern: /('')[^'](?:.*?[^'])?(?=\\1)/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t},\n\t\t\t\t\t'punctuation': /^''+|''+$/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'hr': {\n\t\t\t\tpattern: /^-{4,}/m,\n\t\t\t\talias: 'punctuation',\n\t\t\t},\n\t\t\t'url': [\n\t\t\t\t/ISBN +(?:97[89][ -]?)?(?:\\d[ -]?){9}[\\dx]\\b|(?:PMID|RFC) +\\d+/i,\n\t\t\t\t/\\[\\[.+?\\]\\]|\\[.+?\\]/,\n\t\t\t],\n\t\t\t'variable': [\n\t\t\t\t/__[A-Z]+__/,\n\t\t\t\t// FIXME Nested structures should be handled\n\t\t\t\t// {{formatnum:{{#expr:{{{3}}}}}}}\n\t\t\t\t/\\{{3}.+?\\}{3}/,\n\t\t\t\t/\\{\\{.+?\\}\\}/,\n\t\t\t],\n\t\t\t'symbol': [/^#redirect/im, /~{3,5}/],\n\t\t\t// Handle table attrs:\n\t\t\t// {|\n\t\t\t// ! style=\"text-align:left;\"| Item\n\t\t\t// |}\n\t\t\t'table-tag': {\n\t\t\t\tpattern: /((?:^|[|!])[|!])[^|\\r\\n]+\\|(?!\\|)/m,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'table-bar': {\n\t\t\t\t\t\tpattern: /\\|$/,\n\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t},\n\t\t\t\t\t$rest: tag.inside,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'punctuation': /^(?:\\{\\||\\|\\}|\\|-|[*#:;!|])|\\|\\||!!/m,\n\t\t\t$insert: {\n\t\t\t\t// Prevent highlighting inside <nowiki>, <source> and <pre> tags\n\t\t\t\t'nowiki': {\n\t\t\t\t\t$before: 'tag',\n\t\t\t\t\tpattern: /<(nowiki|pre|source)\\b[^>]*>[\\s\\S]*?<\\/\\1>/i,\n\t\t\t\t\tinside: {\n\t\t\t\t\t\t'tag': {\n\t\t\t\t\t\t\tpattern: /<(?:nowiki|pre|source)\\b[^>]*>|<\\/(?:nowiki|pre|source)>/i,\n\t\t\t\t\t\t\tinside: tag.inside,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n};\n"],"names":["wiki","id","base","markup","grammar","tag","pattern","lookbehind","alias","heading","inside","punctuation","important","emphasis","bold","italic","hr","url","variable","symbol","$rest","$insert","nowiki","$before"],"mappings":"4EAGA,IAAeA,EAAA,CACdC,GAAI,OACJC,KAAMC,EACN,OAAAC,EAASF,KAAEA,IACV,MAAMG,EAA2DH,EAAW,IAE5E,MAAO,CACN,gBAAiB,CAChBI,QAAS,4BACTC,YAAY,EACZC,MAAO,WAERC,QAAW,CACVH,QAAS,sBACTI,OAAQ,CACPC,YAAe,UACfC,UAAa,OAGfC,SAAY,CAEXP,QAAS,gBACTI,OAAQ,CACP,cAAe,CACdJ,QAAS,mBACTC,YAAY,EACZC,MAAO,CAAC,OAAQ,WAEjBM,KAAQ,CACPR,QAAS,8BACTC,YAAY,GAEbQ,OAAU,CACTT,QAAS,6BACTC,YAAY,GAEbI,YAAe,cAGjBK,GAAM,CACLV,QAAS,UACTE,MAAO,eAERS,IAAO,CACN,iEACA,uBAEDC,SAAY,CACX,aAGA,gBACA,eAEDC,OAAU,CAAC,eAAgB,UAK3B,YAAa,CACZb,QAAS,qCACTC,YAAY,EACZG,OAAQ,CACP,YAAa,CACZJ,QAAS,MACTE,MAAO,eAERY,MAAOf,EAAIK,SAGbC,YAAe,uCACfU,QAAS,CAERC,OAAU,CACTC,QAAS,MACTjB,QAAS,8CACTI,OAAQ,CACPL,IAAO,CACNC,QAAS,4DACTI,OAAQL,EAAIK,WAMjB"}