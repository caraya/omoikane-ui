{"version":3,"file":"ruby.js","sources":["../../src/languages/ruby.js"],"sourcesContent":["import clike from './clike.js';\n\n/** @type {import('../types.d.ts').LanguageProto<'ruby'>} */\nexport default {\n\tid: 'ruby',\n\tbase: clike,\n\talias: 'rb',\n\tgrammar () {\n\t\t/**\n\t\t * Original by Samuel Flores\n\t\t *\n\t\t * Adds the following new token classes:\n\t\t *     constant, builtin, variable, symbol, regex\n\t\t */\n\n\t\tconst interpolation = {\n\t\t\tpattern: /((?:^|[^\\\\])(?:\\\\{2})*)#\\{(?:[^{}]|\\{[^{}]*\\})*\\}/,\n\t\t\tlookbehind: true,\n\t\t\tinside: {\n\t\t\t\t'content': {\n\t\t\t\t\tpattern: /^(#\\{)[\\s\\S]+(?=\\}$)/,\n\t\t\t\t\tlookbehind: true,\n\t\t\t\t\tinside: 'ruby',\n\t\t\t\t},\n\t\t\t\t'delimiter': {\n\t\t\t\t\tpattern: /^#\\{|\\}$/,\n\t\t\t\t\talias: 'punctuation',\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst percentExpression =\n\t\t\t'(?:' +\n\t\t\t[\n\t\t\t\t/([^a-zA-Z0-9\\s{(\\[<=])(?:(?!\\1)[^\\\\]|\\\\[\\s\\S])*\\1/.source,\n\t\t\t\t/\\((?:[^()\\\\]|\\\\[\\s\\S]|\\((?:[^()\\\\]|\\\\[\\s\\S])*\\))*\\)/.source,\n\t\t\t\t/\\{(?:[^{}\\\\]|\\\\[\\s\\S]|\\{(?:[^{}\\\\]|\\\\[\\s\\S])*\\})*\\}/.source,\n\t\t\t\t/\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S]|\\[(?:[^\\[\\]\\\\]|\\\\[\\s\\S])*\\])*\\]/.source,\n\t\t\t\t/<(?:[^<>\\\\]|\\\\[\\s\\S]|<(?:[^<>\\\\]|\\\\[\\s\\S])*>)*>/.source,\n\t\t\t].join('|') +\n\t\t\t')';\n\n\t\tconst symbolName = /(?:\"(?:\\\\.|[^\"\\\\\\r\\n])*\"|(?:\\b[a-zA-Z_]\\w*|[^\\s\\0-\\x7F]+)[?!]?|\\$.)/\n\t\t\t.source;\n\n\t\treturn {\n\t\t\t'comment': {\n\t\t\t\tpattern: /#.*|^=begin\\s[\\s\\S]*?^=end/m,\n\t\t\t\tgreedy: true,\n\t\t\t},\n\t\t\t'class-name': {\n\t\t\t\tpattern:\n\t\t\t\t\t/(\\b(?:class|module)\\s+|\\bcatch\\s+\\()[\\w.\\\\]+|\\b[A-Z_]\\w*(?=\\s*\\.\\s*new\\b)/,\n\t\t\t\tlookbehind: true,\n\t\t\t\tinside: {\n\t\t\t\t\t'punctuation': /[.\\\\]/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t'keyword':\n\t\t\t\t/\\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\\b/,\n\t\t\t'operator': /\\.{2,3}|&\\.|===|<?=>|[!=]?~|(?:&&|\\|\\||<<|>>|\\*\\*|[+\\-*/%<>!^&|=])=?|[?:]/,\n\t\t\t'punctuation': /[(){}[\\].,;]/,\n\t\t\t$insertBefore: {\n\t\t\t\t'operator': {\n\t\t\t\t\t'double-colon': {\n\t\t\t\t\t\tpattern: /::/,\n\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'keyword': {\n\t\t\t\t\t'regex-literal': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: RegExp(\n\t\t\t\t\t\t\t\t/%r/.source + percentExpression + /[egimnosux]{0,6}/.source\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'regex': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/(^|[^/])\\/(?!\\/)(?:\\[[^\\r\\n\\]]+\\]|\\\\.|[^[/\\\\\\r\\n])+\\/[egimnosux]{0,6}(?=\\s*(?:$|[\\r\\n,.;})#]))/,\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'regex': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t'variable': /[@$]+[a-zA-Z_]\\w*(?:[?!]|\\b)/,\n\t\t\t\t\t'symbol': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: RegExp(/(^|[^:]):/.source + symbolName),\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: RegExp(\n\t\t\t\t\t\t\t\t/([\\r\\n{(,][ \\t]*)/.source + symbolName + /(?=:(?!:))/.source\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t'method-definition': {\n\t\t\t\t\t\tpattern: /(\\bdef\\s+)\\w+(?:\\s*\\.\\s*\\w+)?/,\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'function': /\\b\\w+$/,\n\t\t\t\t\t\t\t'keyword': /^self\\b/,\n\t\t\t\t\t\t\t'class-name': /^\\w+/,\n\t\t\t\t\t\t\t'punctuation': /\\./,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t'string': {\n\t\t\t\t\t'string-literal': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: RegExp(/%[qQiIwWs]?/.source + percentExpression),\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'string': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern:\n\t\t\t\t\t\t\t\t/(\"|')(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|(?!\\1)[^\\\\#\\r\\n])*\\1/,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'string': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /<<[-~]?([a-z_]\\w*)[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n\t\t\t\t\t\t\talias: 'heredoc-string',\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'delimiter': {\n\t\t\t\t\t\t\t\t\tpattern: /^<<[-~]?[a-z_]\\w*|\\b[a-z_]\\w*$/i,\n\t\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t\t'symbol': /\\b\\w+/,\n\t\t\t\t\t\t\t\t\t\t'punctuation': /^<<[-~]?/,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'string': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /<<[-~]?'([a-z_]\\w*)'[\\r\\n](?:.*[\\r\\n])*?[\\t ]*\\1/i,\n\t\t\t\t\t\t\talias: 'heredoc-string',\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'delimiter': {\n\t\t\t\t\t\t\t\t\tpattern: /^<<[-~]?'[a-z_]\\w*'|\\b[a-z_]\\w*$/i,\n\t\t\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t\t\t'symbol': /\\b\\w+/,\n\t\t\t\t\t\t\t\t\t\t'punctuation': /^<<[-~]?'|'$/,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'string': /[\\s\\S]+/,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t'command-literal': [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: RegExp(/%x/.source + percentExpression),\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'command': {\n\t\t\t\t\t\t\t\t\tpattern: /[\\s\\S]+/,\n\t\t\t\t\t\t\t\t\talias: 'string',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpattern: /`(?:#\\{[^}]+\\}|#(?!\\{)|\\\\(?:\\r\\n|[\\s\\S])|[^\\\\`#\\r\\n])*`/,\n\t\t\t\t\t\t\tgreedy: true,\n\t\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t\t'interpolation': interpolation,\n\t\t\t\t\t\t\t\t'command': {\n\t\t\t\t\t\t\t\t\tpattern: /[\\s\\S]+/,\n\t\t\t\t\t\t\t\t\talias: 'string',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\t'number': {\n\t\t\t\t\t'builtin':\n\t\t\t\t\t\t/\\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\\b/,\n\t\t\t\t\t'constant': /\\b[A-Z][A-Z0-9_]*(?:[?!]|\\b)/,\n\t\t\t\t},\n\t\t\t},\n\t\t\t$delete: ['function', 'string'],\n\t\t};\n\t},\n};\n"],"names":["ruby","id","base","clike","alias","grammar","interpolation","pattern","lookbehind","inside","content","delimiter","percentExpression","symbolName","comment","greedy","punctuation","keyword","operator","$insertBefore","RegExp","regex","variable","symbol","function","string","command","number","builtin","constant","$delete"],"mappings":"0BAGA,IAAeA,EAAA,CACdC,GAAI,OACJC,KAAMC,EACNC,MAAO,KACP,OAAAC,GAQC,MAAMC,EAAgB,CACrBC,QAAS,oDACTC,YAAY,EACZC,OAAQ,CACPC,QAAW,CACVH,QAAS,uBACTC,YAAY,EACZC,OAAQ,QAETE,UAAa,CACZJ,QAAS,WACTH,MAAO,iBAKJQ,EACL,qSAUKC,EAAa,+EAGnB,MAAO,CACNC,QAAW,CACVP,QAAS,8BACTQ,QAAQ,GAET,aAAc,CACbR,QACC,4EACDC,YAAY,EACZC,OAAQ,CACPO,YAAe,UAGjBC,QACC,mSACDC,SAAY,4EACZF,YAAe,eACfG,cAAe,CACdD,SAAY,CACX,eAAgB,CACfX,QAAS,KACTH,MAAO,gBAGTa,QAAW,CACV,gBAAiB,CAChB,CACCV,QAASa,OACR,KAAcR,EAAoB,oBAEnCG,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBe,MAAS,YAGX,CACCd,QACC,iGACDC,YAAY,EACZO,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBe,MAAS,aAIZC,SAAY,+BACZC,OAAU,CACT,CACChB,QAASa,OAAO,YAAqBP,GACrCL,YAAY,EACZO,QAAQ,GAET,CACCR,QAASa,OACR,oBAA6BP,EAAa,cAE3CL,YAAY,EACZO,QAAQ,IAGV,oBAAqB,CACpBR,QAAS,gCACTC,YAAY,EACZC,OAAQ,CACPe,SAAY,SACZP,QAAW,UACX,aAAc,OACdD,YAAe,QAIlBS,OAAU,CACT,iBAAkB,CACjB,CACClB,QAASa,OAAO,cAAuBR,GACvCG,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBmB,OAAU,YAGZ,CACClB,QACC,oEACDQ,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBmB,OAAU,YAGZ,CACClB,QAAS,kDACTH,MAAO,iBACPW,QAAQ,EACRN,OAAQ,CACPE,UAAa,CACZJ,QAAS,kCACTE,OAAQ,CACPc,OAAU,QACVP,YAAe,aAGjBV,cAAiBA,EACjBmB,OAAU,YAGZ,CACClB,QAAS,oDACTH,MAAO,iBACPW,QAAQ,EACRN,OAAQ,CACPE,UAAa,CACZJ,QAAS,oCACTE,OAAQ,CACPc,OAAU,QACVP,YAAe,iBAGjBS,OAAU,aAIb,kBAAmB,CAClB,CACClB,QAASa,OAAO,KAAcR,GAC9BG,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBoB,QAAW,CACVnB,QAAS,UACTH,MAAO,YAIV,CACCG,QAAS,0DACTQ,QAAQ,EACRN,OAAQ,CACPH,cAAiBA,EACjBoB,QAAW,CACVnB,QAAS,UACTH,MAAO,cAMZuB,OAAU,CACTC,QACC,+OACDC,SAAY,iCAGdC,QAAS,CAAC,WAAY,UAEvB"}