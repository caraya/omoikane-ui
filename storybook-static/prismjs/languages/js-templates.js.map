{"version":3,"file":"js-templates.js","sources":["../../src/languages/js-templates.js"],"sourcesContent":["import { JS_TEMPLATE, JS_TEMPLATE_INTERPOLATION } from '../shared/languages/patterns.js';\nimport { embeddedIn } from '../shared/languages/templating.js';\n\n/**\n * Creates a new pattern to match a template string with a special tag.\n *\n * This will return `undefined` if there is no grammar with the given language id.\n *\n * @param {string} language The language id of the embedded language. E.g. `markdown`.\n * @param {string} tag The regex pattern to match the tag.\n * @returns {GrammarToken}\n * @example\n * createTemplate('css', /\\bcss/.source);\n */\nfunction createTemplate (language, tag) {\n\treturn {\n\t\tpattern: RegExp('((?:' + tag + ')\\\\s*)' + JS_TEMPLATE.source),\n\t\tlookbehind: true,\n\t\tgreedy: true,\n\t\talias: 'template-string',\n\t\tinside: {\n\t\t\t'template-punctuation': {\n\t\t\t\tpattern: /^`|`$/,\n\t\t\t\talias: 'string',\n\t\t\t},\n\t\t\t[language]: {\n\t\t\t\tpattern: /[\\s\\S]+/,\n\t\t\t\tinside: {\n\t\t\t\t\t'interpolation': {\n\t\t\t\t\t\tpattern: RegExp(\n\t\t\t\t\t\t\t/((?:^|[^\\\\])(?:\\\\{2})*)/.source + JS_TEMPLATE_INTERPOLATION.source\n\t\t\t\t\t\t),\n\t\t\t\t\t\tlookbehind: true,\n\t\t\t\t\t\tinside: {\n\t\t\t\t\t\t\t'interpolation-punctuation': {\n\t\t\t\t\t\t\t\tpattern: /^\\$\\{|\\}$/,\n\t\t\t\t\t\t\t\talias: 'punctuation',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t$rest: 'javascript',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t$tokenize: embeddedIn(language),\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t};\n}\n\n/** @type {import('../types.d.ts').LanguageProto<'js-templates'>} */\nexport default {\n\tid: 'js-templates',\n\tgrammar () {\n\t\treturn {\n\t\t\t'template-string': [\n\t\t\t\t// styled-jsx:\n\t\t\t\t//   css`a { color: #25F; }`\n\t\t\t\t// styled-components:\n\t\t\t\t//   styled.h1`color: red;`\n\t\t\t\tcreateTemplate(\n\t\t\t\t\t'css',\n\t\t\t\t\t/\\b(?:styled(?:\\([^)]*\\))?(?:\\s*\\.\\s*\\w+(?:\\([^)]*\\))*)*|css(?:\\s*\\.\\s*(?:global|resolve))?|createGlobalStyle|keyframes)/\n\t\t\t\t\t\t.source\n\t\t\t\t),\n\n\t\t\t\t// html`<p></p>`\n\t\t\t\t// div.innerHTML = `<p></p>`\n\t\t\t\tcreateTemplate('html', /\\bhtml|\\.\\s*(?:inner|outer)HTML\\s*\\+?=/.source),\n\n\t\t\t\t// svg`<path fill=\"#fff\" d=\"M55.37 ...\"/>`\n\t\t\t\tcreateTemplate('svg', /\\bsvg/.source),\n\n\t\t\t\t// md`# h1`, markdown`## h2`\n\t\t\t\tcreateTemplate('markdown', /\\b(?:markdown|md)/.source),\n\n\t\t\t\t// gql`...`, graphql`...`, graphql.experimental`...`\n\t\t\t\tcreateTemplate('graphql', /\\b(?:gql|graphql(?:\\s*\\.\\s*experimental)?)/.source),\n\n\t\t\t\t// sql`...`\n\t\t\t\tcreateTemplate('sql', /\\bsql/.source),\n\t\t\t],\n\t\t};\n\t},\n};\n\n/**\n * @typedef {import('../types.d.ts').GrammarToken} GrammarToken\n */\n"],"names":["createTemplate","language","tag","pattern","RegExp","JS_TEMPLATE","source","lookbehind","greedy","alias","inside","interpolation","JS_TEMPLATE_INTERPOLATION","$rest","$tokenize","embeddedIn","jsTemplates","id","grammar"],"mappings":"0RAcA,SAASA,EAAgBC,EAAUC,GAClC,MAAO,CACNC,QAASC,OAAO,OAASF,EAAM,SAAWG,EAAYC,QACtDC,YAAY,EACZC,QAAQ,EACRC,MAAO,kBACPC,OAAQ,CACP,uBAAwB,CACvBP,QAAS,QACTM,MAAO,UAERR,CAACA,GAAW,CACXE,QAAS,UACTO,OAAQ,CACPC,cAAiB,CAChBR,QAASC,OACR,8BAAmCQ,EAA0BN,QAE9DC,YAAY,EACZG,OAAQ,CACP,4BAA6B,CAC5BP,QAAS,YACTM,MAAO,eAERI,MAAO,eAGTC,UAAWC,EAAWd,MAK3B,CAGA,IAAee,EAAA,CACdC,GAAI,eACJC,QAAQ,KACA,CACN,kBAAmB,CAKlBlB,EACC,MACA,uIAMDA,EAAe,OAAQ,+CAGvBA,EAAe,MAAO,UAGtBA,EAAe,WAAY,sBAG3BA,EAAe,UAAW,kDAG1BA,EAAe,MAAO"}