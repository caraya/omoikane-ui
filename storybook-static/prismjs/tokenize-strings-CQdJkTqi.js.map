{"version":3,"file":"tokenize-strings-CQdJkTqi.js","sources":["../src/shared/tokenize-strings.js"],"sourcesContent":["/**\n * Given a token stream and a tokenization function, this will tokenize all\n * strings in the given token stream.\n *\n * The token stream returned by `tokenize` must have the same text content as\n * the given text.\n *\n * @param {TokenStream} tokens\n * @param {(code: string) => TokenStream} tokenize\n */\nexport function tokenizeStrings (tokens, tokenize) {\n\t/**\n\t * @param {string} code\n\t */\n\tconst wrappedTokenize = code => {\n\t\tconst tokens = tokenize(code);\n\t\tif (tokens.length === 1) {\n\t\t\tconst single = tokens[0];\n\t\t\tif (typeof single === 'string') {\n\t\t\t\treturn single;\n\t\t\t}\n\t\t}\n\t\treturn tokens;\n\t};\n\n\t/**\n\t * @param {TokenStream} tokens\n\t */\n\tconst walkTokens = tokens => {\n\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\tconst token = tokens[i];\n\n\t\t\tif (typeof token === 'string') {\n\t\t\t\tconst result = wrappedTokenize(token);\n\t\t\t\tif (typeof result === 'string') {\n\t\t\t\t\ttokens[i] = result;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttokens.splice(i, 1, ...result);\n\t\t\t\t\ti += result.length - 1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof token.content === 'string') {\n\t\t\t\ttoken.content = wrappedTokenize(token.content);\n\t\t\t}\n\t\t\telse {\n\t\t\t\twalkTokens(token.content);\n\t\t\t}\n\t\t}\n\t};\n\n\twalkTokens(tokens);\n}\n\n/**\n * @typedef {import('../types.d.ts').TokenStream} TokenStream\n */\n"],"names":["tokenizeStrings","tokens","tokenize","wrappedTokenize","code","length","single","walkTokens","i","token","result","splice","content"],"mappings":"AAUO,SAASA,EAAiBC,EAAQC,GAIxC,MAAMC,EAAkBC,IACvB,MAAMH,EAASC,EAASE,GACxB,GAAsB,IAAlBH,EAAOI,OAAc,CACxB,MAAMC,EAASL,EAAO,GACtB,GAAsB,iBAAXK,EACV,OAAOA,CAEX,CACE,OAAOL,CAAM,EAMRM,EAAaN,IAClB,IAAK,IAAIO,EAAI,EAAGA,EAAIP,EAAOI,OAAQG,IAAK,CACvC,MAAMC,EAAQR,EAAOO,GAErB,GAAqB,iBAAVC,EAAoB,CAC9B,MAAMC,EAASP,EAAgBM,GACT,iBAAXC,EACVT,EAAOO,GAAKE,GAGZT,EAAOU,OAAOH,EAAG,KAAME,GACvBF,GAAKE,EAAOL,OAAS,EAE1B,KACqC,iBAAlBI,EAAMG,QACrBH,EAAMG,QAAUT,EAAgBM,EAAMG,SAGtCL,EAAWE,EAAMG,QAErB,GAGCL,EAAWN,EACZ"}