{"version":3,"file":"previewers.js","sources":["../../src/plugins/previewers/previewers.js"],"sourcesContent":["import prism from '../../global.js';\nimport cssExtras from '../../languages/css-extras.js';\nimport { forEach } from '../../util/iterables.js';\n\n/**\n * Returns the absolute X, Y offsets for an element.\n *\n * @param {Element} element\n * @returns {{ top: number, right: number, bottom: number, left: number, width: number, height: number }}\n */\nconst getOffset = element => {\n\tconst elementBounds = element.getBoundingClientRect();\n\tlet left = elementBounds.left;\n\tlet top = elementBounds.top;\n\tconst documentBounds = document.documentElement.getBoundingClientRect();\n\tleft -= documentBounds.left;\n\ttop -= documentBounds.top;\n\n\treturn {\n\t\ttop,\n\t\tright: innerWidth - left - elementBounds.width,\n\t\tbottom: innerHeight - top - elementBounds.height,\n\t\tleft,\n\t\twidth: elementBounds.width,\n\t\theight: elementBounds.height,\n\t};\n};\n\nconst TOKEN_CLASS = 'token';\nconst ACTIVE_CLASS = 'active';\nconst FLIPPED_CLASS = 'flipped';\n\n/**\n * @callback Updater\n * @this {HTMLDivElement}\n * @param {string} value\n * @returns {boolean}\n */\n\n/**\n * @typedef {Previewer & { _elt: HTMLDivElement }} PreviewerE\n */\n\n/**\n * @callback Initializer\n * @this {PreviewerE}\n * @returns {void}\n */\n\nclass Previewer {\n\t/** @type {string} */\n\ttype;\n\t/** @type {string | string[]} */\n\tsupportedLanguages;\n\t/** @type {Updater} */\n\tupdater;\n\t/** @type {Initializer | undefined} */\n\tinitializer;\n\n\t/**\n\t * @type {HTMLDivElement | null}\n\t */\n\t_elt = null;\n\n\t/**\n\t * @type {Element | null}\n\t */\n\t_token = null;\n\n\t/**\n\t * Previewer constructor\n\t *\n\t * @param {string} type Unique previewer type\n\t * @param {Updater} updater Function that will be called on mouseover.\n\t * @param {string[] | string} [supportedLanguages='*'] Aliases of the languages this previewer must be enabled for. Defaults to \"*\", all languages.\n\t * @param {Initializer} [initializer] Function that will be called on initialization.\n\t */\n\tconstructor (type, updater, supportedLanguages = '*', initializer) {\n\t\tthis.type = type;\n\t\tthis.supportedLanguages = supportedLanguages;\n\t\tthis.updater = updater;\n\t\tthis.initializer = initializer;\n\t}\n\t/**\n\t * Creates the HTML element for the previewer.\n\t *\n\t * @returns {asserts this is PreviewerE}\n\t */\n\tinit () {\n\t\tif (this._elt) {\n\t\t\treturn;\n\t\t}\n\t\tthis._elt = document.createElement('div');\n\t\tthis._elt.className = 'prism-previewer prism-previewer-' + this.type;\n\t\tdocument.body.appendChild(this._elt);\n\t\tif (this.initializer) {\n\t\t\tthis.initializer.call(/** @type {PreviewerE} */ (this));\n\t\t}\n\t}\n\n\t/**\n\t * @param {Element} token\n\t * @returns {boolean}\n\t */\n\tisDisabled (token) {\n\t\tconst previewers = token.closest('[data-previewers]')?.getAttribute('data-previewers');\n\t\tconst parts = (previewers || '').split(/\\s+/);\n\t\treturn !parts.includes(this.type);\n\t}\n\t/**\n\t * Checks the class name of each hovered element.\n\t *\n\t * @param {Element} token\n\t * @returns {void}\n\t */\n\ttryShow (token) {\n\t\tif (token.classList.contains(TOKEN_CLASS) && this.isDisabled(token)) {\n\t\t\treturn;\n\t\t}\n\t\tconst target = token.closest(`.${TOKEN_CLASS}.${this.type}`);\n\t\tif (target && target !== this._token) {\n\t\t\tthis._token = target;\n\t\t\tthis.show();\n\t\t}\n\t}\n\t/**\n\t * Called on mouseout\n\t */\n\tmouseout = () => {\n\t\tthis._token?.removeEventListener('mouseout', this.mouseout, false);\n\t\tthis._token = null;\n\t\tthis.hide();\n\t};\n\t/**\n\t * Shows the previewer positioned properly for the current token.\n\t */\n\tshow () {\n\t\tthis.init();\n\n\t\tif (!this._token) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.updater.call(this._elt, this._token.textContent || '')) {\n\t\t\tthis._token.addEventListener('mouseout', this.mouseout, false);\n\n\t\t\tconst offset = getOffset(this._token);\n\t\t\tthis._elt.classList.add(ACTIVE_CLASS);\n\n\t\t\tif (offset.top - this._elt.offsetHeight > 0) {\n\t\t\t\tthis._elt.classList.remove(FLIPPED_CLASS);\n\t\t\t\tthis._elt.style.top = `${offset.top}px`;\n\t\t\t\tthis._elt.style.bottom = '';\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis._elt.classList.add(FLIPPED_CLASS);\n\t\t\t\tthis._elt.style.bottom = `${offset.bottom}px`;\n\t\t\t\tthis._elt.style.top = '';\n\t\t\t}\n\n\t\t\tthis._elt.style.left = `${offset.left + Math.min(200, offset.width / 2)}px`;\n\t\t}\n\t\telse {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\t/**\n\t * Hides the previewer.\n\t */\n\thide () {\n\t\tthis._elt?.classList.remove(ACTIVE_CLASS);\n\t}\n}\n\nexport class PreviewerCollection {\n\t/**\n\t * Map of all registered previewers by language.\n\t *\n\t * @type {Map<string, Previewer[]>}\n\t */\n\tbyLanguages = new Map();\n\t/**\n\t * Map of all registered previewers by type.\n\t *\n\t * @type {Map<string, Previewer>}\n\t */\n\tbyType = new Map();\n\n\t/**\n\t * @param {Previewer} previewer\n\t */\n\tadd (previewer) {\n\t\tforEach(previewer.supportedLanguages, lang => {\n\t\t\tlet list = this.byLanguages.get(lang);\n\t\t\tif (list === undefined) {\n\t\t\t\tlist = [];\n\t\t\t\tthis.byLanguages.set(lang, list);\n\t\t\t}\n\t\t\tif (!list.includes(previewer)) {\n\t\t\t\tlist.push(previewer);\n\t\t\t}\n\t\t});\n\n\t\tthis.byType.set(previewer.type, previewer);\n\t}\n\n\t/**\n\t * Initializes the mouseover event on the code block.\n\t *\n\t * @param {Element} elt The code block (`env.element`)\n\t * @param {string} lang The language (`env.language`)\n\t */\n\tinitEvents (elt, lang) {\n\t\t/** @type {Previewer[]} */\n\t\tconst previewers = [];\n\t\tpreviewers.push(...(this.byLanguages.get(lang) ?? []));\n\t\tpreviewers.push(...(this.byLanguages.get('*') ?? []));\n\t\tif (previewers.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\telt.addEventListener(\n\t\t\t'mouseover',\n\t\t\te => {\n\t\t\t\tconst target = e.target;\n\t\t\t\tif (target) {\n\t\t\t\t\tpreviewers.forEach(previewer => {\n\t\t\t\t\t\tpreviewer.tryShow(/** @type {Element} */ (target));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n}\n\n// TODO: Filthy hack to be able to load this script\nconst Prism = { languages: {} };\n\nconst previewers = {\n\t// gradient must be defined before color and angle\n\t'gradient': {\n\t\tcreate () {\n\t\t\t/**\n\t\t\t * Stores already processed gradients so that we don't\n\t\t\t * make the conversion every time the previewer is shown\n\t\t\t */\n\t\t\tconst cache = {};\n\n\t\t\t/**\n\t\t\t * Returns a W3C-valid linear gradient\n\t\t\t *\n\t\t\t * @param {string} prefix Vendor prefix if any (\"-moz-\", \"-webkit-\", etc.)\n\t\t\t * @param {string} func Gradient function name (\"linear-gradient\")\n\t\t\t * @param {string[]} values Array of the gradient function parameters ([\"0deg\", \"red 0%\", \"blue 100%\"])\n\t\t\t */\n\t\t\tfunction convertToW3CLinearGradient (prefix, func, values) {\n\t\t\t\t// Default value for angle\n\t\t\t\tlet angle = '180deg';\n\n\t\t\t\tconst first = values[0];\n\t\t\t\tif (\n\t\t\t\t\tfirst &&\n\t\t\t\t\t/^(?:-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:deg|rad)|bottom|left|right|to\\b|top)/.test(\n\t\t\t\t\t\tfirst\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tangle = first;\n\t\t\t\t\tvalues.shift();\n\t\t\t\t\tif (!angle.includes('to ')) {\n\t\t\t\t\t\t// Angle uses old keywords\n\t\t\t\t\t\t// W3C syntax uses \"to\" + opposite keywords\n\t\t\t\t\t\tif (angle.includes('top')) {\n\t\t\t\t\t\t\tif (angle.includes('left')) {\n\t\t\t\t\t\t\t\tangle = 'to bottom right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (angle.includes('right')) {\n\t\t\t\t\t\t\t\tangle = 'to bottom left';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tangle = 'to bottom';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (angle.includes('bottom')) {\n\t\t\t\t\t\t\tif (angle.includes('left')) {\n\t\t\t\t\t\t\t\tangle = 'to top right';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (angle.includes('right')) {\n\t\t\t\t\t\t\t\tangle = 'to top left';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tangle = 'to top';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (angle.includes('left')) {\n\t\t\t\t\t\t\tangle = 'to right';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (angle.includes('right')) {\n\t\t\t\t\t\t\tangle = 'to left';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (prefix) {\n\t\t\t\t\t\t\t// Angle is shifted by 90deg in prefixed gradients\n\t\t\t\t\t\t\tif (angle.includes('deg')) {\n\t\t\t\t\t\t\t\tangle = `${90 - parseFloat(angle)}deg`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (angle.includes('rad')) {\n\t\t\t\t\t\t\t\tangle = `${Math.PI / 2 - parseFloat(angle)}rad`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn func + '(' + angle + ',' + values.join(',') + ')';\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Returns a W3C-valid radial gradient\n\t\t\t *\n\t\t\t * @param {string} prefix Vendor prefix if any (\"-moz-\", \"-webkit-\", etc.)\n\t\t\t * @param {string} func Gradient function name (\"linear-gradient\")\n\t\t\t * @param {string[]} values Array of the gradient function parameters ([\"0deg\", \"red 0%\", \"blue 100%\"])\n\t\t\t */\n\t\t\tfunction convertToW3CRadialGradient (prefix, func, values) {\n\t\t\t\tif (!values[0].includes('at')) {\n\t\t\t\t\t// Looks like old syntax\n\n\t\t\t\t\t// Default values\n\t\t\t\t\tlet position = 'center';\n\t\t\t\t\tlet shape = 'ellipse';\n\t\t\t\t\tlet size = 'farthest-corner';\n\n\t\t\t\t\tif (/\\b(?:bottom|center|left|right|top)\\b|^\\d+/.test(values[0])) {\n\t\t\t\t\t\t// Found a position\n\t\t\t\t\t\t// Remove angle value, if any\n\t\t\t\t\t\tposition = /** @type {string} */ (values.shift()).replace(\n\t\t\t\t\t\t\t/\\s*-?\\d+(?:deg|rad)\\s*/,\n\t\t\t\t\t\t\t''\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (/\\b(?:circle|closest|contain|cover|ellipse|farthest)\\b/.test(values[0])) {\n\t\t\t\t\t\t// Found a shape and/or size\n\t\t\t\t\t\tconst shapeSizeParts = /** @type {string} */ (values.shift()).split(/\\s+/);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshapeSizeParts[0] &&\n\t\t\t\t\t\t\t(shapeSizeParts[0] === 'circle' || shapeSizeParts[0] === 'ellipse')\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tshape = /** @type {string} */ (shapeSizeParts.shift());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (shapeSizeParts[0]) {\n\t\t\t\t\t\t\tsize = /** @type {string} */ (shapeSizeParts.shift());\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Old keywords are converted to their synonyms\n\t\t\t\t\t\tif (size === 'cover') {\n\t\t\t\t\t\t\tsize = 'farthest-corner';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (size === 'contain') {\n\t\t\t\t\t\t\tsize = 'clothest-side';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\tfunc +\n\t\t\t\t\t\t'(' +\n\t\t\t\t\t\tshape +\n\t\t\t\t\t\t' ' +\n\t\t\t\t\t\tsize +\n\t\t\t\t\t\t' at ' +\n\t\t\t\t\t\tposition +\n\t\t\t\t\t\t',' +\n\t\t\t\t\t\tvalues.join(',') +\n\t\t\t\t\t\t')'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn func + '(' + values.join(',') + ')';\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Converts a gradient to a W3C-valid one\n\t\t\t * Does not support old webkit syntax (-webkit-gradient(linear...) and -webkit-gradient(radial...))\n\t\t\t *\n\t\t\t * @param {string} gradient The CSS gradient\n\t\t\t */\n\t\t\tfunction convertToW3CGradient (gradient) {\n\t\t\t\tif (cache[gradient]) {\n\t\t\t\t\treturn cache[gradient];\n\t\t\t\t}\n\n\t\t\t\tconst values = gradient\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t/^(?:\\b|\\B-[a-z]{1,10}-)(?:repeating-)?(?:linear|radial)-gradient\\(|\\)$/g,\n\t\t\t\t\t\t''\n\t\t\t\t\t)\n\t\t\t\t\t.split(/\\s*,\\s*/);\n\t\t\t\tconst parts = gradient.match(\n\t\t\t\t\t/^(\\b|\\B-[a-z]{1,10}-)((?:repeating-)?(?:linear|radial)-gradient)/\n\t\t\t\t);\n\n\t\t\t\tif (!parts) {\n\t\t\t\t\treturn (cache[gradient] = '');\n\t\t\t\t}\n\n\t\t\t\t// \"\", \"-moz-\", etc.\n\t\t\t\tconst prefix = parts[1];\n\t\t\t\t// \"linear-gradient\", \"radial-gradient\", etc.\n\t\t\t\tconst func = parts[2];\n\n\t\t\t\tif (func.includes('linear')) {\n\t\t\t\t\treturn (cache[gradient] = convertToW3CLinearGradient(prefix, func, values));\n\t\t\t\t}\n\t\t\t\telse if (func.includes('radial')) {\n\t\t\t\t\treturn (cache[gradient] = convertToW3CRadialGradient(prefix, func, values));\n\t\t\t\t}\n\t\t\t\treturn (cache[gradient] = func + '(' + values.join(',') + ')');\n\t\t\t}\n\n\t\t\treturn new Previewer(\n\t\t\t\t'gradient',\n\t\t\t\tfunction (value) {\n\t\t\t\t\tconst first = /** @type {HTMLElement | null} */ (this.firstChild);\n\t\t\t\t\tif (!first) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tfirst.style.backgroundImage = '';\n\t\t\t\t\tfirst.style.backgroundImage = convertToW3CGradient(value);\n\t\t\t\t\treturn !!first.style.backgroundImage;\n\t\t\t\t},\n\t\t\t\t'*',\n\t\t\t\tfunction () {\n\t\t\t\t\tthis._elt.innerHTML = '<div></div>';\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\ttokens: {\n\t\t\t'gradient': {\n\t\t\t\tpattern:\n\t\t\t\t\t/(?:\\b|\\B-[a-z]{1,10}-)(?:repeating-)?(?:linear|radial)-gradient\\((?:(?:hsl|rgb)a?\\(.+?\\)|[^\\)])+\\)/gi,\n\t\t\t\tinside: {\n\t\t\t\t\t'function': /[\\w-]+(?=\\()/,\n\t\t\t\t\t'punctuation': /[(),]/,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tlanguages: {\n\t\t\t'css': true,\n\t\t\t'less': true,\n\t\t\t'sass': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tbefore: 'punctuation',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['variable-line'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tbefore: 'punctuation',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['property-line'],\n\t\t\t\t},\n\t\t\t],\n\t\t\t'scss': true,\n\t\t\t'stylus': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'func',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['property-declaration'].inside,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'func',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['variable-declaration'].inside,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\t'angle': {\n\t\tcreate () {\n\t\t\treturn new Previewer(\n\t\t\t\t'angle',\n\t\t\t\tfunction (value) {\n\t\t\t\t\tconst num = parseFloat(value);\n\t\t\t\t\tconst unit = value.match(/[a-z]+$/i);\n\t\t\t\t\tlet max = 1;\n\t\t\t\t\tif (!num || !unit) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch (unit[0]) {\n\t\t\t\t\t\tcase 'deg':\n\t\t\t\t\t\t\tmax = 360;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'grad':\n\t\t\t\t\t\t\tmax = 400;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'rad':\n\t\t\t\t\t\t\tmax = 2 * Math.PI;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'turn':\n\t\t\t\t\t\t\tmax = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst percentage = ((100 * num) / max) % 100;\n\t\t\t\t\tthis[`${num < 0 ? 'set' : 'remove'}Attribute`]('data-negative', '');\n\t\t\t\t\tconst circle = this.querySelector('circle');\n\t\t\t\t\tif (circle) {\n\t\t\t\t\t\tcircle.style.strokeDasharray = `${Math.abs(percentage)},500`;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t'*',\n\t\t\t\tfunction () {\n\t\t\t\t\tthis._elt.innerHTML =\n\t\t\t\t\t\t'<svg viewBox=\"0 0 64 64\">' +\n\t\t\t\t\t\t'<circle r=\"16\" cy=\"32\" cx=\"32\"></circle>' +\n\t\t\t\t\t\t'</svg>';\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\ttokens: {\n\t\t\t'angle': /(?:\\b|\\B-|(?=\\B\\.))(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:deg|g?rad|turn)\\b/i,\n\t\t},\n\t\tlanguages: {\n\t\t\t'css': true,\n\t\t\t'less': true,\n\t\t\t'markup': {\n\t\t\t\tlang: 'markup',\n\t\t\t\tbefore: 'punctuation',\n\t\t\t\tinside: 'inside',\n\t\t\t\troot: Prism.languages.markup && Prism.languages.markup['tag'].inside['attr-value'],\n\t\t\t},\n\t\t\t'sass': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['property-line'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tbefore: 'operator',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['variable-line'],\n\t\t\t\t},\n\t\t\t],\n\t\t\t'scss': true,\n\t\t\t'stylus': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'func',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['property-declaration'].inside,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'func',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['variable-declaration'].inside,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\t'color': {\n\t\tcreate () {\n\t\t\treturn new Previewer('color', function (value) {\n\t\t\t\tthis.style.backgroundColor = '';\n\t\t\t\tthis.style.backgroundColor = value;\n\t\t\t\treturn !!this.style.backgroundColor;\n\t\t\t});\n\t\t},\n\t\ttokens: {\n\t\t\t'color': [Prism.languages.css?.['hexcode']].concat(Prism.languages.css?.['color']),\n\t\t},\n\t\tlanguages: {\n\t\t\t// CSS extras is required, so css and scss are not necessary\n\t\t\t'css': false,\n\t\t\t'less': true,\n\t\t\t'markup': {\n\t\t\t\tlang: 'markup',\n\t\t\t\tbefore: 'punctuation',\n\t\t\t\tinside: 'inside',\n\t\t\t\troot: Prism.languages.markup && Prism.languages.markup['tag'].inside['attr-value'],\n\t\t\t},\n\t\t\t'sass': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tbefore: 'punctuation',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['variable-line'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['property-line'],\n\t\t\t\t},\n\t\t\t],\n\t\t\t'scss': false,\n\t\t\t'stylus': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['property-declaration'].inside,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['variable-declaration'].inside,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\t'easing': {\n\t\tcreate () {\n\t\t\tconst identifierMap = {\n\t\t\t\t'linear': '0,0,1,1',\n\t\t\t\t'ease': '.25,.1,.25,1',\n\t\t\t\t'ease-in': '.42,0,1,1',\n\t\t\t\t'ease-out': '0,0,.58,1',\n\t\t\t\t'ease-in-out': '.42,0,.58,1',\n\t\t\t};\n\t\t\treturn new Previewer(\n\t\t\t\t'easing',\n\t\t\t\tfunction (value) {\n\t\t\t\t\tvalue = identifierMap[value] || value;\n\n\t\t\t\t\tconst p = value.match(/-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/g);\n\n\t\t\t\t\tif (p && p.length === 4) {\n\t\t\t\t\t\tconst values = p\n\t\t\t\t\t\t\t.map(Number)\n\t\t\t\t\t\t\t.map((p, i) => (i % 2 ? 1 - p : p) * 100)\n\t\t\t\t\t\t\t.map(String);\n\n\t\t\t\t\t\tthis.querySelector('path')?.setAttribute(\n\t\t\t\t\t\t\t'd',\n\t\t\t\t\t\t\t'M0,100 C' +\n\t\t\t\t\t\t\t\tvalues[0] +\n\t\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\t\tvalues[1] +\n\t\t\t\t\t\t\t\t', ' +\n\t\t\t\t\t\t\t\tvalues[2] +\n\t\t\t\t\t\t\t\t',' +\n\t\t\t\t\t\t\t\tvalues[3] +\n\t\t\t\t\t\t\t\t', 100,0'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst lines = this.querySelectorAll('line');\n\t\t\t\t\t\tlines[0].setAttribute('x2', values[0]);\n\t\t\t\t\t\tlines[0].setAttribute('y2', values[1]);\n\t\t\t\t\t\tlines[1].setAttribute('x2', values[2]);\n\t\t\t\t\t\tlines[1].setAttribute('y2', values[3]);\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\t\t\t\t'*',\n\t\t\t\tfunction () {\n\t\t\t\t\tthis._elt.innerHTML =\n\t\t\t\t\t\t'<svg viewBox=\"-20 -20 140 140\" width=\"100\" height=\"100\">' +\n\t\t\t\t\t\t'<defs>' +\n\t\t\t\t\t\t'<marker id=\"prism-previewer-easing-marker\" viewBox=\"0 0 4 4\" refX=\"2\" refY=\"2\" markerUnits=\"strokeWidth\">' +\n\t\t\t\t\t\t'<circle cx=\"2\" cy=\"2\" r=\"1.5\" />' +\n\t\t\t\t\t\t'</marker>' +\n\t\t\t\t\t\t'</defs>' +\n\t\t\t\t\t\t'<path d=\"M0,100 C20,50, 40,30, 100,0\" />' +\n\t\t\t\t\t\t'<line x1=\"0\" y1=\"100\" x2=\"20\" y2=\"50\" marker-start=\"url(#prism-previewer-easing-marker)\" marker-end=\"url(#prism-previewer-easing-marker)\" />' +\n\t\t\t\t\t\t'<line x1=\"100\" y1=\"0\" x2=\"40\" y2=\"30\" marker-start=\"url(#prism-previewer-easing-marker)\" marker-end=\"url(#prism-previewer-easing-marker)\" />' +\n\t\t\t\t\t\t'</svg>';\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\ttokens: {\n\t\t\t'easing': {\n\t\t\t\tpattern:\n\t\t\t\t\t/\\bcubic-bezier\\((?:-?(?:\\d+(?:\\.\\d+)?|\\.\\d+),\\s*){3}-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\)\\B|\\b(?:ease(?:-in)?(?:-out)?|linear)(?=\\s|[;}]|$)/i,\n\t\t\t\tinside: {\n\t\t\t\t\t'function': /[\\w-]+(?=\\()/,\n\t\t\t\t\t'punctuation': /[(),]/,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tlanguages: {\n\t\t\t'css': true,\n\t\t\t'less': true,\n\t\t\t'sass': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\tbefore: 'punctuation',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['variable-line'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['property-line'],\n\t\t\t\t},\n\t\t\t],\n\t\t\t'scss': true,\n\t\t\t'stylus': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['property-declaration'].inside,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['variable-declaration'].inside,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n\n\t'time': {\n\t\tcreate () {\n\t\t\treturn new Previewer(\n\t\t\t\t'time',\n\t\t\t\tfunction (value) {\n\t\t\t\t\tconst num = parseFloat(value);\n\t\t\t\t\tconst unit = value.match(/[a-z]+$/i);\n\t\t\t\t\tif (!num || !unit) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tconst u = unit[0];\n\t\t\t\t\tconst circle = this.querySelector('circle');\n\t\t\t\t\tif (circle) {\n\t\t\t\t\t\tcircle.style.animationDuration = `${2 * num}${u}`;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t'*',\n\t\t\t\tfunction () {\n\t\t\t\t\tthis._elt.innerHTML =\n\t\t\t\t\t\t'<svg viewBox=\"0 0 64 64\">' +\n\t\t\t\t\t\t'<circle r=\"16\" cy=\"32\" cx=\"32\"></circle>' +\n\t\t\t\t\t\t'</svg>';\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\ttokens: {\n\t\t\t'time': /(?:\\b|\\B-|(?=\\B\\.))(?:\\d+(?:\\.\\d+)?|\\.\\d+)m?s\\b/i,\n\t\t},\n\t\tlanguages: {\n\t\t\t'css': true,\n\t\t\t'less': true,\n\t\t\t'markup': {\n\t\t\t\tlang: 'markup',\n\t\t\t\tbefore: 'punctuation',\n\t\t\t\tinside: 'inside',\n\t\t\t\troot: Prism.languages.markup && Prism.languages.markup['tag'].inside['attr-value'],\n\t\t\t},\n\t\t\t'sass': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['property-line'],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'sass',\n\t\t\t\t\tbefore: 'operator',\n\t\t\t\t\tinside: 'inside',\n\t\t\t\t\troot: Prism.languages.sass && Prism.languages.sass['variable-line'],\n\t\t\t\t},\n\t\t\t],\n\t\t\t'scss': true,\n\t\t\t'stylus': [\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['property-declaration'].inside,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlang: 'stylus',\n\t\t\t\t\tbefore: 'hexcode',\n\t\t\t\t\tinside: 'rest',\n\t\t\t\t\troot:\n\t\t\t\t\t\tPrism.languages.stylus &&\n\t\t\t\t\t\tPrism.languages.stylus['variable-declaration'].inside,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n};\n\n/** @type {import('../../types.d.ts').PluginProto<'previewers'>} */\nconst Self = {\n\tid: 'previewers',\n\trequire: cssExtras,\n\tplugin () {\n\t\tconst collection = new PreviewerCollection();\n\n\t\tif (typeof document !== 'undefined') {\n\t\t\tfor (const previewer of Object.values(previewers)) {\n\t\t\t\tcollection.add(previewer.create());\n\t\t\t}\n\t\t}\n\n\t\treturn collection;\n\t},\n\teffect (Prism) {\n\t\t/*\n\t\tPrism.hooks.add('before-highlight', (env) => {\n\t\t\tfor (const previewer of Object.values(previewers)) {\n\t\t\t\tconst languages = previewer.languages;\n\t\t\t\tif (languages[env.language] && !languages[env.language].initialized) {\n\t\t\t\t\tlet lang = languages[env.language];\n\t\t\t\t\tif (!Array.isArray(lang)) {\n\t\t\t\t\t\tlang = [lang];\n\t\t\t\t\t}\n\t\t\t\t\tlang.forEach((lang) => {\n\t\t\t\t\t\tlet before; let inside; let root; let skip;\n\t\t\t\t\t\tif (lang === true) {\n\t\t\t\t\t\t\tbefore = 'important';\n\t\t\t\t\t\t\tinside = env.language;\n\t\t\t\t\t\t\tlang = env.language;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tbefore = lang.before || 'important';\n\t\t\t\t\t\t\tinside = lang.inside || lang.lang;\n\t\t\t\t\t\t\troot = lang.root || Prism.languages;\n\t\t\t\t\t\t\tskip = lang.skip;\n\t\t\t\t\t\t\tlang = env.language;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!skip && Prism.languages[lang]) {\n\t\t\t\t\t\t\tPrism.languages.insertBefore(inside, before, previewer.tokens, root);\n\t\t\t\t\t\t\tenv.grammar = Prism.languages[lang];\n\n\t\t\t\t\t\t\tlanguages[env.language] = { initialized: true };\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t*/\n\n\t\treturn Prism.hooks.add('after-highlight', env => {\n\t\t\t/** @type {PreviewerCollection} */\n\t\t\tconst previewers = Prism.pluginRegistry.peek(Self)?.plugin;\n\t\t\tpreviewers.initEvents(env.element, env.language);\n\t\t});\n\t},\n};\n\nexport default Self;\n\nprism.pluginRegistry.add(Self);\n"],"names":["TOKEN_CLASS","ACTIVE_CLASS","FLIPPED_CLASS","Previewer","type","supportedLanguages","updater","initializer","_elt","_token","constructor","this","init","document","createElement","className","body","appendChild","call","isDisabled","token","previewers","closest","getAttribute","split","includes","tryShow","classList","contains","target","show","mouseout","removeEventListener","hide","textContent","addEventListener","offset","element","elementBounds","getBoundingClientRect","left","top","documentBounds","documentElement","right","innerWidth","width","bottom","innerHeight","height","getOffset","add","offsetHeight","remove","style","Math","min","PreviewerCollection","byLanguages","Map","byType","previewer","forEach","lang","list","get","undefined","set","push","initEvents","elt","length","e","Prism","languages","gradient","create","cache","value","first","backgroundImage","values","replace","parts","match","prefix","func","angle","test","shift","parseFloat","PI","join","convertToW3CLinearGradient","position","shape","size","shapeSizeParts","convertToW3CRadialGradient","convertToW3CGradient","innerHTML","tokens","pattern","inside","function","punctuation","css","less","sass","before","root","scss","stylus","num","unit","max","percentage","circle","querySelector","strokeDasharray","abs","markup","color","backgroundColor","concat","easing","identifierMap","linear","ease","p","map","Number","i","String","setAttribute","lines","querySelectorAll","time","u","animationDuration","Self","id","require","cssExtras","plugin","collection","Object","effect","hooks","env","pluginRegistry","peek","language","prism"],"mappings":"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"}