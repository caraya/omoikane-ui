import{j as s}from"./jsx-runtime-DwZrPTBh.js";import{r as n}from"./iframe-DeqXgmUH.js";import{C as B,G as O}from"./CustomGrid-jAHPB5rM.js";import{D as P}from"./Cell-CKDM8_4M.js";import{P as V}from"./Pill-BK8eSsm0.js";import{c as F}from"./cn-fNskMoFt.js";import{T as f}from"./TextField-CT8mfHUG.js";const R=({columns:b=3,items:N,draggable:o=!1,className:w})=>{const h=Array.from({length:b},(e,t)=>`Column ${t+1}`),[m,D]=n.useState(b),[u,v]=n.useState(h),[g,d]=n.useState(()=>N.map(e=>({...e,subtitle:h[(e.column??1)-1]}))),[p,y]=n.useState(""),[T,x]=n.useState(null),[j,i]=n.useState(""),[C,c]=n.useState(""),S=()=>{if(!p.trim())return;const t={id:`${Date.now()}`,title:p,subtitle:u[0]??"Column 1",column:1};d(a=>[t,...a]),y("")},I=e=>{x(e.id),i(typeof e.title=="string"?e.title:String(e.title??"")),c(typeof e.body=="string"?e.body:"")},A=e=>{d(t=>t.map(a=>a.id===e?{...a,title:j,body:C}:a)),x(null),i(""),c("")},E=()=>{x(null),i(""),c("")},k=(e,t)=>{e.dataTransfer.setData("text/plain",t),e.dataTransfer.effectAllowed="move"},q=(e,t)=>{e.preventDefault();const a=e.dataTransfer.getData("text/plain");a&&d(r=>r.map(l=>l.id===a?{...l,column:t,subtitle:u[t-1]??l.subtitle}:l))},_=e=>{e.preventDefault()},G=Array.from({length:m},(e,t)=>t+1),$=()=>{const e=m+1;D(e),v(t=>[...t,`Column ${e}`])};return s.jsxs("div",{className:F("w-full",w),children:[s.jsxs("div",{className:"flex items-center justify-between gap-4 mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(f,{value:p,onChange:e=>y(e.target.value),placeholder:"New card title",className:"w-64"}),s.jsx("button",{type:"button",onClick:()=>S(),className:"inline-flex items-center px-3 py-1.5 rounded bg-green-600 text-white text-sm hover:bg-green-700",children:"+ Add card"})]}),s.jsx("div",{children:s.jsx("button",{type:"button",onClick:$,className:"inline-flex items-center px-3 py-1.5 rounded bg-blue-600 text-white text-sm hover:bg-blue-700",children:"+ Add column"})})]}),s.jsx(B,{columns:m,gap:12,children:G.map(e=>s.jsx(O,{col:e,children:s.jsxs("div",{className:"bg-gray-50 border rounded-md overflow-hidden h-full flex flex-col",children:[s.jsxs("div",{className:"px-3 py-2 border-b flex items-center justify-between",children:[s.jsx("div",{className:"w-full",children:s.jsx(f,{value:u[e-1],onChange:t=>{const a=t.target.value;v(r=>{const l=[...r];return l[e-1]=a,l}),d(r=>r.map(l=>l.column===e?{...l,subtitle:a}:l))},className:"w-full"})}),s.jsx(V,{className:"ml-2",children:g.filter(t=>(t.column??1)===e).length})]}),s.jsx("div",{className:"p-2 overflow-auto flex-1 space-y-2",onDragOver:o?_:void 0,onDrop:o?t=>q(t,e):void 0,children:g.filter(t=>(t.column??1)===e).map(t=>s.jsx("div",{draggable:o,onDragStart:o?a=>k(a,t.id):void 0,children:T===t.id?s.jsxs("div",{className:"bg-white p-3 border rounded",children:[s.jsx("div",{className:"mb-2",children:s.jsx(f,{value:j,onChange:a=>i(a.target.value)})}),s.jsx("div",{className:"mb-2",children:s.jsx("textarea",{value:C,onChange:a=>c(a.target.value),className:"w-full border rounded p-2 min-h-[80px]",placeholder:"Card body"})}),s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx("button",{type:"button",onClick:()=>A(t.id),className:"px-3 py-1 rounded bg-green-600 text-white text-sm",children:"Save"}),s.jsx("button",{type:"button",onClick:E,className:"px-3 py-1 rounded bg-gray-200 text-sm",children:"Cancel"})]})]}):s.jsxs("div",{onDoubleClick:()=>I(t),children:[s.jsx(P,{title:t.title,subtitle1:t.subtitle,className:"bg-white"}),t.body?s.jsx("div",{className:"text-sm text-gray-600 mt-1 px-2",children:t.body}):null]})},t.id))})]})},e))})]})};R.__docgenInfo={description:"",methods:[],displayName:"DataTable",props:{columns:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"3",computed:!1}},items:{required:!0,tsType:{name:"Array",elements:[{name:"DataItem"}],raw:"DataItem[]"},description:""},draggable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""}}};export{R as D};
