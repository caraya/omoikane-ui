import{j as r}from"./jsx-runtime-DwZrPTBh.js";import{r as S,R as $}from"./iframe-DeqXgmUH.js";import{C as A,G as R}from"./CustomGrid-jAHPB5rM.js";import{c as x}from"./cn-fNskMoFt.js";import{T}from"./Toolbar-DV3Kd1-d.js";import{P as N}from"./Popover-CYH3571o.js";const v=({className:m,children:a,bordered:p=!0,shadow:f=!1,...h})=>r.jsx("div",{className:x("bg-white rounded-lg overflow-hidden",p&&"border border-gray-200",f&&"shadow-md",m),...h,children:a});v.__docgenInfo={description:"",methods:[],displayName:"Card",props:{bordered:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},shadow:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const D=({cards:m,columns:a=4,gap:p=12,rowHeight:f=72,className:h,showToolbar:w=!0})=>{const[i,g]=S.useState({}),j=(e,t,s)=>{g({openId:`${e}:${t}`,anchorRef:s,content:`Card ${e} action ${t}`,placement:"bottom"})},d=`dashboard-grid-cols-${a}`,k=e=>{if(!["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key))return;const s=e.currentTarget,l=Array.from(s.querySelectorAll("[data-dashboard-card]"));if(l.length===0)return;const q=()=>{const u=document.activeElement;if(!u)return-1;const c=u.closest("[data-dashboard-card]");return c?l.indexOf(c):-1},C=()=>{const u=s.querySelector(".omoikane-custom-grid");if(!u)return a;const c=window.getComputedStyle(u),y=c&&c.gridTemplateColumns;return y?y.split(" ").length:a},o=q();if(o<0)return;const b=C();let n=o;e.key==="ArrowRight"?n=Math.min(l.length-1,o+1):e.key==="ArrowLeft"?n=Math.max(0,o-1):e.key==="ArrowDown"?n=Math.min(l.length-1,o+b):e.key==="ArrowUp"&&(n=Math.max(0,o-b)),n!==o&&n>=0&&n<l.length&&(e.preventDefault(),l[n].focus())};return r.jsxs("div",{className:x("dashboard-card-grid",h),onKeyDown:k,children:[w&&r.jsx("div",{style:{marginBottom:12},children:r.jsx(T,{children:r.jsx("div",{style:{fontWeight:600},children:"Dashboard"})})}),r.jsx("a",{href:"#dashboard-grid",style:{position:"absolute",left:-9999,top:"auto"},id:"skip-dashboard",children:"Skip to dashboard"}),r.jsx("style",{children:`
        .${d} { --grid-columns: ${a}; }
        @media (max-width: 639px) { .${d} { --grid-columns: 1; } }
        @media (min-width: 640px) and (max-width: 1023px) { .${d} { --grid-columns: 2; } }
        /* Focus styles for keyboard navigation */
        .${d} [data-dashboard-card]:focus { outline: none; box-shadow: 0 0 0 3px rgba(59,130,246,0.18); border-radius: 8px; }
        .${d} [data-dashboard-card]:focus-visible { box-shadow: 0 0 0 3px rgba(59,130,246,0.36); }
      `}),r.jsx("div",{className:d,children:r.jsx(A,{columns:a,gap:p,rowHeight:f,style:{alignItems:"start",gridTemplateColumns:`repeat(var(--grid-columns, ${a}), minmax(0, 1fr))`},children:m.map(e=>r.jsx(R,{col:e.col??1,row:e.row,colSpan:e.colSpan??1,rowSpan:e.rowSpan??1,children:r.jsx("div",{"data-dashboard-card":!0,tabIndex:0,style:{outline:"none"},children:r.jsx(v,{shadow:!0,className:"h-full",children:r.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:8},children:[r.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600},children:e.title}),e.subtitle&&r.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:e.subtitle})]})}),r.jsx("div",{style:{flex:1},children:e.content??null}),e.actions&&e.actions.length>0&&r.jsx("div",{style:{display:"flex",gap:8},children:e.actions.map(t=>{const s=$.createRef();return r.jsx("button",{ref:s,onClick:()=>j(e.id,t.id,s),className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200","aria-haspopup":"dialog","aria-controls":`popover-${e.id}-${t.id}`,children:t.label},t.id)})})]})})})},e.id))})}),r.jsx(N,{isOpen:!!i.openId,anchorRef:i.anchorRef,onClose:()=>g({}),placement:i.placement,className:"min-w-[160px]",trapFocus:!1,children:r.jsxs("div",{id:i.openId?`popover-${i.openId.replace(":","-")}`:void 0,children:[r.jsx("div",{style:{fontWeight:600,marginBottom:6},children:"Action"}),r.jsx("div",{style:{fontSize:13},children:i.content})]})})]})};D.__docgenInfo={description:"",methods:[],displayName:"DashboardCardGrid",props:{cards:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  title: string;
  subtitle?: string;
  content?: React.ReactNode;
  col?: number;
  row?: number;
  colSpan?: number;
  rowSpan?: number;
  actions?: { id: string; label: string }[];
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"subtitle",value:{name:"string",required:!1}},{key:"content",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"col",value:{name:"number",required:!1}},{key:"row",value:{name:"number",required:!1}},{key:"colSpan",value:{name:"number",required:!1}},{key:"rowSpan",value:{name:"number",required:!1}},{key:"actions",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ id: string; label: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"label",value:{name:"string",required:!0}}]}}],raw:"{ id: string; label: string }[]",required:!1}}]}}],raw:"DashboardCard[]"},description:""},columns:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"4",computed:!1}},gap:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"12",computed:!1}},rowHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"72",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},showToolbar:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{v as C,D};
